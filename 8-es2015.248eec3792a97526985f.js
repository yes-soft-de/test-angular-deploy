(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{bEN7:function(e,t,n){"use strict";n.r(t),n.d(t,"AdminsModule",(function(){return Y}));var a=n("tyNb"),i=n("kt0X");const r=Object(i.n)("[Admin/API] Load Admins"),c=Object(i.n)("[Admin/API] Load Admins Success",Object(i.s)()),s=Object(i.n)("[Admin/API] Load Admins Failure",Object(i.s)()),o=Object(i.n)("[Admin/API] Add Admin",Object(i.s)()),l=Object(i.n)("[Admin/API] Add Admin Success"),d=Object(i.n)("[Admin/API] Add Admin Failure",Object(i.s)()),m=Object(i.n)("[Admin/API] Delete Admin",Object(i.s)()),u=Object(i.n)("[Admin/API] Delete Admin Success",Object(i.s)()),p=Object(i.n)("[Admin/API] Delete Admin Failure",Object(i.s)());var b=n("R0sL");const g=Object(b.a)({selectId:e=>e.userID}),h=g.getInitialState({Data:void 0,error:void 0}),f=Object(i.p)(h,Object(i.r)(c,(e,t)=>g.setAll(t.Data,e)),Object(i.r)(s,(e,t)=>Object.assign(Object.assign({},e),{error:t.error})),Object(i.r)(d,(e,t)=>Object.assign(Object.assign({},e),{error:t.error})),Object(i.r)(u,(e,t)=>g.removeOne(t.userID,e)),Object(i.r)(p,(e,t)=>Object.assign(Object.assign({},e),{error:t.error}))),{selectAll:v}=g.getSelectors(),A=Object(i.o)("admins"),w=Object(i.q)(A,v),C=Object(i.q)(A,e=>e.error);var O=n("fXoL"),y=n("ofXK"),j=n("3Pt+"),Z=n("oOf3"),I=n("sYmb");function F(e,t){if(1&e){const e=O.bc();O.ac(0,"tr"),O.ac(1,"td"),O.Wb(2,"img",11),O.Zb(),O.ac(3,"td"),O.Cc(4),O.Zb(),O.ac(5,"td"),O.Cc(6),O.Zb(),O.ac(7,"td"),O.Cc(8),O.mc(9,"date"),O.Zb(),O.ac(10,"td"),O.ac(11,"a",12),O.ic("click",(function(){O.wc(e);const n=t.$implicit;return O.lc(2).delete(null==n?null:n.userID)})),O.Cc(12),O.mc(13,"translate"),O.Zb(),O.Zb(),O.Zb()}if(2&e){const e=t.$implicit,n=O.lc(2);O.Jb(2),O.qc("src",null==e?null:e.image,O.yc),O.rc("alt","",null==e?null:e.name," Image"),O.Jb(2),O.Dc(null!=e&&e.name?null==e?null:e.name:"-"),O.Jb(2),O.Dc(null!=e&&e.email?null==e?null:e.email:"-"),O.Jb(2),O.Dc(null!=e&&e.createDate?O.oc(9,9,1e3*(null==e||null==e.createDate?null:e.createDate.timestamp),"yyyy-MM-dd"):"-"),O.Jb(3),O.Mb("btn btn-danger confirm btn-sm mr-1 mb-1 ",n.isDeleted?"disabled":"",""),O.Jb(1),O.Ec(" ",O.nc(13,12,"delete")," ")}}function P(e,t){if(1&e){const e=O.bc();O.ac(0,"div"),O.ac(1,"h1",1),O.Cc(2),O.mc(3,"translate"),O.Zb(),O.ac(4,"div",2),O.ac(5,"div",3),O.ac(6,"div",4),O.ac(7,"input",5),O.ic("ngModelChange",(function(t){return O.wc(e),O.lc().name=t}))("keyup",(function(){return O.wc(e),O.lc().applyFilter()})),O.mc(8,"translate"),O.mc(9,"translate"),O.Zb(),O.Zb(),O.Zb(),O.Zb(),O.ac(10,"div",6),O.ac(11,"table",7),O.ac(12,"tr",8),O.ac(13,"td"),O.Cc(14),O.mc(15,"translate"),O.Zb(),O.ac(16,"td"),O.Cc(17),O.mc(18,"translate"),O.Zb(),O.ac(19,"td"),O.Cc(20),O.mc(21,"translate"),O.Zb(),O.ac(22,"td"),O.Cc(23),O.mc(24,"translate"),O.Zb(),O.ac(25,"td"),O.Cc(26),O.mc(27,"translate"),O.Zb(),O.Zb(),O.Bc(28,F,14,14,"tr",9),O.mc(29,"paginate"),O.Zb(),O.ac(30,"pagination-controls",10),O.ic("pageChange",(function(t){return O.wc(e),O.lc().pageChanged(t)})),O.mc(31,"translate"),O.mc(32,"translate"),O.mc(33,"translate"),O.Zb(),O.Zb(),O.Zb()}if(2&e){const e=O.lc();O.Jb(2),O.Dc(O.nc(3,13,"manage-admins-page")),O.Jb(5),O.qc("placeholder",O.nc(8,15,"admins-search-input")),O.qc("title",O.nc(9,17,"admins-search-input")),O.pc("ngModel",e.name),O.Jb(7),O.Dc(O.nc(15,19,"image")),O.Jb(3),O.Dc(O.nc(18,21,"name")),O.Jb(3),O.Dc(O.nc(21,23,"email")),O.Jb(3),O.Dc(O.nc(24,25,"create-date")),O.Jb(3),O.Dc(O.nc(27,27,"control")),O.Jb(2),O.pc("ngForOf",O.oc(29,29,e.adminsList,e.config)),O.Jb(2),O.qc("previousLabel",O.nc(31,32,"prev")),O.qc("nextLabel",O.nc(32,34,"next")),O.qc("screenReaderCurrentLabel",O.nc(33,36,"you-are-on-page"))}}function D(e,t){1&e&&(O.ac(0,"div"),O.ac(1,"div",13),O.Wb(2,"div"),O.Wb(3,"div"),O.Wb(4,"div"),O.Wb(5,"div"),O.Zb(),O.Zb())}let J=(()=>{class e{constructor(e){this.store=e,this.adminsList=[]}ngOnInit(){this.store.dispatch(r()),this.getAllAdmins(),this.store.select(C).subscribe(e=>console.log("error : ",e))}getAllAdmins(){this.adminsSubscription=this.store.select(w).subscribe(e=>{this.admins=e,this.adminsList=e,this.config={itemsPerPage:5,currentPage:1,totalItems:this.adminsList.length}})}pageChanged(e){this.config.currentPage=e}delete(e){confirm("Are you sure you want to delete this admin ?")&&this.store.dispatch(m({userID:e}))}applyFilter(){this.name?(this.adminsList=[],this.adminsList=this.admins.filter(e=>{if(e.name){const t=e.name.toLocaleLowerCase().match(this.name.toLocaleLowerCase());if(t)return t}if(e.email){const t=e.email.toLocaleLowerCase().match(this.name.toLocaleLowerCase());if(t)return t}})):this.adminsList=[...this.admins]}ngOnDestroy(){this.adminsSubscription&&this.adminsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(O.Vb(i.h))},e.\u0275cmp=O.Pb({type:e,selectors:[["app-all-admins"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"text-center","details-title","my-4"],[1,"row"],[1,"col-10","col-sm-8","col-md-6","col-xl-4"],[1,"form-group","mb-4"],["id","exampleFormControlInput2","type","text",1,"form-control","form-control-underlined","border-primary","search-input",3,"ngModel","placeholder","title","ngModelChange","keyup"],[1,"table-responsive","text-center"],[1,"table","table-bordered","main-table"],[1,"bg-dark","text-white"],[4,"ngFor","ngForOf"],["autoHide","true","maxSize","5","responsive","true","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page",1,"my-pagination",3,"previousLabel","nextLabel","screenReaderCurrentLabel","pageChange"],[1,"img-thumbnail","img-custom",3,"src","alt"],[3,"click"],[1,"lds-ring"]],template:function(e,t){1&e&&(O.Bc(0,P,34,38,"div",0),O.Bc(1,D,6,0,"div",0)),2&e&&(O.pc("ngIf",0!=t.admins.length),O.Jb(1),O.pc("ngIf",0==t.admins.length))},directives:[y.n,j.a,j.g,j.j,y.m,Z.c],pipes:[I.c,Z.b,y.f],styles:[""]}),e})();var L=n("LC35"),x=n("EWl0"),S=n("tk/3");let q=(()=>{class e{constructor(e){this.httpClient=e}getAdmins(){return this.httpClient.get(x.a.adminsAPI)}newAdmin(e){return this.httpClient.post(x.a.createAdminAPI,e)}deleteAdmin(e){return this.httpClient.delete(`${x.a.deleteAdminAPI}/${e}`)}uploadImage(e){const t=new FormData;return t.append("image",e),this.httpClient.post(x.a.generalUploadAPI,t)}}return e.\u0275fac=function(t){return new(t||e)(O.ec(S.b))},e.\u0275prov=O.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var k=n("5eHb");const M=["passwordField"];function V(e,t){1&e&&(O.ac(0,"span",28),O.Cc(1),O.mc(2,"translate"),O.Zb()),2&e&&(O.Jb(1),O.Dc(O.nc(2,1,"name-field-is-required")))}function B(e,t){1&e&&(O.ac(0,"span",28),O.Cc(1),O.mc(2,"translate"),O.Zb()),2&e&&(O.Jb(1),O.Dc(O.nc(2,1,"password-field-is-required")))}function R(e,t){1&e&&(O.ac(0,"span",28),O.Cc(1),O.mc(2,"translate"),O.Zb()),2&e&&(O.Jb(1),O.Dc(O.nc(2,1,"email-field-is-required")))}function _(e,t){1&e&&(O.ac(0,"span",28),O.Cc(1),O.mc(2,"translate"),O.Zb()),2&e&&(O.Jb(1),O.Dc(O.nc(2,1,"email-field-valid")))}const $=function(e){return{"is-invalid":e}},N=[{path:"",component:J},{path:"add",component:(()=>{class e{constructor(e,t,n,a,i,r,c){this.store=e,this.adminService=t,this.translate=n,this.toaster=a,this.router=i,this.render=r,this.document=c,this.uploadButtonValue="upload",this.imageName="select-image",this.fileSelected=!1,this.imagePathReady=!1,this.submitButtonValue="waiting-uploading-image"}ngOnInit(){this.router.events.subscribe(e=>{e instanceof a.c&&"/admins/add"==e.urlAfterRedirects&&this.checkCurrentLang()}),this.addAdminForm=new j.d({name:new j.b("",j.o.required),password:new j.b("",j.o.required),email:new j.b("",[j.o.required,j.o.email]),userID:new j.b(""),image:new j.b("")}),this.checkLangChange()}showPassword(){this.passwordField.nativeElement.setAttribute("type","text")}hidePassword(){this.passwordField.nativeElement.setAttribute("type","password")}updateName(e){const t=e.files[0];this.uploadButtonValue="upload",this.imageName=t.name,this.fileSelected=!0}processFile(e){this.fileSelected=!1,this.uploadButtonValue="uploading...",console.log("Processing File");const t=e.files[0],n=new FileReader;n.addEventListener("load",e=>{this.selectedFile=new L.a(e.target.result,t),this.adminService.uploadImage(this.selectedFile.file).subscribe(e=>{console.log(e),this.imageUrl=e,this.uploadButtonValue="uploaded",this.imagePathReady=!0,this.submitButtonValue="new-admin"},e=>{this.uploadButtonValue="upload",this.fileSelected=!0,this.toaster.error("Network Error, Please Try After a Few Seconds"),console.log(e)})}),n.readAsDataURL(t)}onSubmit(){if(!this.addAdminForm.valid)return void this.toaster.error("Form Not Valid !");const e=this.addAdminForm.getRawValue();e.userID=e.email,e.image=this.imageUrl,console.log(e),this.store.dispatch(o({admin:e}))}checkCurrentLang(){let e=0;const t=setInterval(()=>{e++,"ar"==this.translate.currentLang?(this.render.removeClass(this.document.querySelector(".input-group-custom"),"input-group"),this.render.addClass(this.document.querySelector(".input-group-custom"),"input-group-ar")):(this.render.addClass(this.document.querySelector(".input-group-custom"),"input-group"),this.render.removeClass(this.document.querySelector(".input-group-custom"),"input-group-ar")),2==e&&clearInterval(t)},200)}checkLangChange(){this.translate.onLangChange.subscribe(e=>{"ar"==(null==e?void 0:e.lang)?(this.render.removeClass(this.document.querySelector(".input-group-custom"),"input-group"),this.render.addClass(this.document.querySelector(".input-group-custom"),"input-group-ar")):(this.render.addClass(this.document.querySelector(".input-group-custom"),"input-group"),this.render.removeClass(this.document.querySelector(".input-group-custom"),"input-group-ar"))})}}return e.\u0275fac=function(t){return new(t||e)(O.Vb(i.h),O.Vb(q),O.Vb(I.d),O.Vb(k.b),O.Vb(a.d),O.Vb(O.K),O.Vb(y.e))},e.\u0275cmp=O.Pb({type:e,selectors:[["app-new-admin"]],viewQuery:function(e,t){var n;1&e&&O.Ic(M,!0),2&e&&O.tc(n=O.jc())&&(t.passwordField=n.first)},decls:53,vars:49,consts:[[1,"container-fluid"],[1,"content-header"],[1,"text-center","mt-5","mb-3"],[1,"card","card-info","mb-5"],[1,"card-header","bg-light-blue","text-white","p-3"],[3,"formGroup","ngSubmit"],[1,"card-body"],[1,"form-group"],["for","exampleInputname1"],["type","text","name","name","formControlName","name","id","exampleInputname1",1,"form-control",3,"ngClass","placeholder"],["class","invalid-feedback",4,"ngIf"],["for","exampleInputpassword"],[1,"position-relative"],["type","password","name","password","formControlName","password","id","exampleInputpassword",1,"form-control",3,"ngClass","placeholder"],["passwordField",""],[1,"fa","fa-eye","fa-custom",3,"mouseenter","mouseleave"],["for","exampleInputEmail"],["type","email","name","email","formControlName","email","id","exampleInputEmail",1,"form-control",3,"ngClass","placeholder"],["for","exampleInputupload"],[1,"input-group","input-group-custom"],[1,"custom-file"],["type","file","accept","image/*","id","file-input",1,"custom-file-input",3,"change"],["imageInput",""],["for","file-input",1,"custom-file-label"],[1,"input-group-append"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"card-footer"],["type","submit",1,"btn","bg-light-blue","text-white",3,"disabled"],[1,"invalid-feedback"]],template:function(e,t){if(1&e){const e=O.bc();O.ac(0,"div",0),O.ac(1,"div",1),O.ac(2,"h1",2),O.Cc(3),O.mc(4,"translate"),O.Zb(),O.Zb(),O.ac(5,"div",3),O.Wb(6,"div",4),O.ac(7,"form",5),O.ic("ngSubmit",(function(){return t.onSubmit()})),O.ac(8,"div",6),O.ac(9,"div",7),O.ac(10,"label",8),O.Cc(11),O.mc(12,"translate"),O.Zb(),O.Wb(13,"input",9),O.mc(14,"translate"),O.Bc(15,V,3,3,"span",10),O.Zb(),O.ac(16,"div",7),O.ac(17,"label",11),O.Cc(18),O.mc(19,"translate"),O.Zb(),O.ac(20,"div",12),O.Wb(21,"input",13,14),O.mc(23,"translate"),O.ac(24,"i",15),O.ic("mouseenter",(function(){return t.showPassword()}))("mouseleave",(function(){return t.hidePassword()})),O.Zb(),O.Zb(),O.Bc(25,B,3,3,"span",10),O.Zb(),O.ac(26,"div",7),O.ac(27,"label",16),O.Cc(28),O.mc(29,"translate"),O.Zb(),O.Wb(30,"input",17),O.mc(31,"translate"),O.Bc(32,R,3,3,"span",10),O.Bc(33,_,3,3,"span",10),O.Zb(),O.ac(34,"div",7),O.ac(35,"label",18),O.Cc(36),O.mc(37,"translate"),O.Zb(),O.ac(38,"div",19),O.ac(39,"div",20),O.ac(40,"input",21,22),O.ic("change",(function(){O.wc(e);const n=O.uc(41);return t.updateName(n)})),O.Zb(),O.ac(42,"label",23),O.Cc(43),O.mc(44,"translate"),O.Zb(),O.Zb(),O.ac(45,"div",24),O.ac(46,"button",25),O.ic("click",(function(){O.wc(e);const n=O.uc(41);return t.processFile(n)})),O.Cc(47),O.mc(48,"translate"),O.Zb(),O.Zb(),O.Zb(),O.Zb(),O.Zb(),O.ac(49,"div",26),O.ac(50,"button",27),O.Cc(51),O.mc(52,"translate"),O.Zb(),O.Zb(),O.Zb(),O.Zb(),O.Zb()}2&e&&(O.Jb(3),O.Dc(O.nc(4,21,"new-admin-page")),O.Jb(4),O.pc("formGroup",t.addAdminForm),O.Jb(4),O.Dc(O.nc(12,23,"name")),O.Jb(2),O.qc("placeholder",O.nc(14,25,"name-type-placeholder")),O.pc("ngClass",O.sc(43,$,t.addAdminForm.get("name").errors&&(t.addAdminForm.get("name").touched||t.addAdminForm.get("name").dirty))),O.Jb(2),O.pc("ngIf",null==t.addAdminForm.get("name").errors?null:t.addAdminForm.get("name").errors.required),O.Jb(3),O.Dc(O.nc(19,27,"password")),O.Jb(3),O.qc("placeholder",O.nc(23,29,"password-type-placeholder")),O.pc("ngClass",O.sc(45,$,t.addAdminForm.get("password").errors&&(t.addAdminForm.get("password").touched||t.addAdminForm.get("password").dirty))),O.Jb(4),O.pc("ngIf",null==t.addAdminForm.get("password").errors?null:t.addAdminForm.get("password").errors.required),O.Jb(3),O.Dc(O.nc(29,31,"email")),O.Jb(2),O.qc("placeholder",O.nc(31,33,"email-type-placeholder")),O.pc("ngClass",O.sc(47,$,t.addAdminForm.get("email").errors&&(t.addAdminForm.get("email").touched||t.addAdminForm.get("email").dirty))),O.Jb(2),O.pc("ngIf",null==t.addAdminForm.get("email").errors?null:t.addAdminForm.get("email").errors.required),O.Jb(1),O.pc("ngIf",null==t.addAdminForm.get("email").errors?null:t.addAdminForm.get("email").errors.email),O.Jb(3),O.Dc(O.nc(37,35,"upload")),O.Jb(7),O.Dc(O.nc(44,37,t.imageName)),O.Jb(3),O.pc("disabled",!t.fileSelected),O.Jb(1),O.Ec(" ",O.nc(48,39,t.uploadButtonValue)," "),O.Jb(3),O.pc("disabled",t.addAdminForm.invalid),O.Jb(1),O.Dc(O.nc(52,41,"create")))},directives:[j.q,j.h,j.e,j.a,j.g,j.c,y.l,y.n],pipes:[I.c],styles:['.fa-custom[_ngcontent-%COMP%]{display:inline-block;position:absolute;top:12px;right:15px;cursor:pointer;opacity:.5}.fa-custom[_ngcontent-%COMP%]:hover{opacity:1}.input-group-ar[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]{position:relative;flex:1 1 auto;width:1%;margin-bottom:0}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]   .custom-file-input[_ngcontent-%COMP%]{width:100%;min-width:14rem;max-width:100%;height:calc(2.25rem + 2px);margin:0;opacity:0}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]   .custom-file-label[_ngcontent-%COMP%]{position:absolute;top:0;right:0;left:0;z-index:1;height:calc(2.25rem + 2px);padding:.375rem .75rem;line-height:1.5;color:#495057;background-color:#fff;border:1px solid #ced4da;border-radius:.25rem}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]   .custom-file-label[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;bottom:0;z-index:3;display:block;height:2.25rem;padding:.375rem .75rem;line-height:1.5;color:#495057;content:"Browse";background-color:#e9ecef;border-left:1px solid #ced4da;border-radius:.25rem 0 0 .25rem}']}),e})()}];let E=(()=>{class e{}return e.\u0275mod=O.Tb({type:e}),e.\u0275inj=O.Sb({factory:function(t){return new(t||e)},imports:[[a.g.forChild(N)],a.g]}),e})();var W=n("9jGm"),z=n("5+tZ"),T=n("lJxs"),U=n("JIr8"),X=n("XqQ8"),G=n("vkgz"),H=n("LRne");let K=(()=>{class e{constructor(e,t,n,a,i){this.actions$=e,this.adminService=t,this.router=n,this.activatedRoute=a,this.toaster=i,this.loadAdmins$=Object(W.c)(()=>this.actions$.pipe(Object(W.d)(r),Object(z.a)(()=>this.adminService.getAdmins().pipe(Object(T.a)(e=>c(e)),Object(U.a)(e=>Object(H.a)(s({error:e}))))))),this.addAdmin$=Object(W.c)(()=>this.actions$.pipe(Object(W.d)(o),Object(X.a)(e=>this.adminService.newAdmin(e.admin).pipe(Object(T.a)(e=>(this.toaster.success(e.msg),l())),Object(U.a)(e=>Object(H.a)(d({error:e}))))))),this.redirectAfterAdd$=Object(W.c)(()=>this.actions$.pipe(Object(W.d)(l),Object(G.a)(()=>this.router.navigate(["admins"]))),{dispatch:!1}),this.deleteAdmin$=Object(W.c)(()=>this.actions$.pipe(Object(W.d)(m),Object(z.a)(e=>this.adminService.deleteAdmin(e.userID).pipe(Object(T.a)(t=>(console.log("effect res : ",t),this.toaster.success(t.msg),u({userID:e.userID}))),Object(U.a)(e=>Object(H.a)(p({error:e})))))))}}return e.\u0275fac=function(t){return new(t||e)(O.ec(W.a),O.ec(q),O.ec(a.d),O.ec(a.a),O.ec(k.b))},e.\u0275prov=O.Rb({token:e,factory:e.\u0275fac}),e})();var Q=n("vTDv");let Y=(()=>{class e{}return e.\u0275mod=O.Tb({type:e}),e.\u0275inj=O.Sb({factory:function(t){return new(t||e)},imports:[[Q.a,E,i.j.forFeature("admins",f),W.b.forFeature([K])]]}),e})()}}]);