function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{HR9E:function(e,t,n){"use strict";n.r(t),n.d(t,"RegionsModule",(function(){return Be}));var i,o=n("tyNb"),a=n("ofXK"),c=n("3Pt+"),r=n("LC35"),l=n("kt0X"),s=Object(l.n)("[Region/API] Load Regions"),u=Object(l.n)("[Region/API] Load Regions Success",Object(l.s)()),d=Object(l.n)("[Region/API] Load Regions Failure",Object(l.s)()),g=Object(l.n)("[Region/API] Load Region",Object(l.s)()),b=Object(l.n)("[Region/API] Load Region Success",Object(l.s)()),p=Object(l.n)("[Region/API] Load Region Failure",Object(l.s)()),m=Object(l.n)("[Region/API] Delete Region",Object(l.s)()),f=Object(l.n)("[Region/API] Delete Region Success"),h=Object(l.n)("[Region/API] Delete Region Failure",Object(l.s)()),v=Object(l.n)("[Region/API] Add Region",Object(l.s)()),C=Object(l.n)("[Region/API] Add Region Success"),y=Object(l.n)("[Region/API] Add Region Failure",Object(l.s)()),O=Object(l.n)("[Region/API] Update Region",Object(l.s)()),P=Object(l.n)("[Region/API] Update Region Success",Object(l.s)()),w=Object(l.n)("[Region/API] Update Region Failure",Object(l.s)()),Z=n("fXoL"),R=n("5eHb"),_=n("Kj3r"),k=n("/uUt"),I=n("eIep"),x=n("EWl0"),M=n("tk/3"),L=n("lf8/"),J=((i=function(){function e(t,n){_classCallCheck(this,e),this.httpClient=t,this.tokenService=n}return _createClass(e,[{key:"getAllRegions",value:function(){return this.httpClient.get(x.a.regionsAPI)}},{key:"getRegion",value:function(e){return this.httpClient.get("".concat(x.a.regionAPI,"/").concat(e))}},{key:"createRegion",value:function(e){return this.httpClient.post(x.a.regionAPI,JSON.stringify(e))}},{key:"updateRegion",value:function(e){return this.httpClient.put(x.a.updateRegionAPI,JSON.stringify(e))}},{key:"deleteRegion",value:function(e){return this.httpClient.delete("".concat(x.a.regionAPI,"/").concat(e))}},{key:"getGoogleMapToken",value:function(){return this.httpClient.get(x.a.googleMapTokenAPI)}},{key:"getPlaceDetailsByPlaceID",value:function(e,t){return this.httpClient.get(x.a.googleMapPlaceDetailsAPI+"json?place_id=".concat(e,"&key=").concat(t))}},{key:"search",value:function(e,t){return this.httpClient.get(x.a.googleMapSearchAPI+"json?input=".concat(e,"&types=geocode&key=").concat(t))}},{key:"searchLocationAutoComplete",value:function(e,t){var n=this;return e.pipe(Object(_.a)(500),Object(k.a)(),Object(I.a)((function(e){return e?n.search(e,t):[]})))}},{key:"uploadImage",value:function(e){var t=new FormData;return t.append("image",e),this.httpClient.post(x.a.generalUploadAPI,t)}}]),e}()).\u0275fac=function(e){return new(e||i)(Z.ec(M.b),Z.ec(L.a))},i.\u0275prov=Z.Rb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),j=n("sYmb"),S=["search"];function F(e,t){if(1&e){var n=Z.bc();Z.ac(0,"li",32),Z.ic("click",(function(){Z.wc(n);var e=t.$implicit;return Z.lc(3).getLocationInfo(e)})),Z.Cc(1),Z.Zb()}if(2&e){var i=t.$implicit;Z.Jb(1),Z.Dc(null==i?null:i.description)}}function D(e,t){if(1&e&&(Z.ac(0,"ul",30),Z.Bc(1,F,2,1,"li",31),Z.Zb()),2&e){var n=Z.lc(2);Z.Jb(1),Z.pc("ngForOf",n.googleLocationsNameList)}}function A(e,t){1&e&&(Z.ac(0,"div",33),Z.Wb(1,"div"),Z.Wb(2,"div"),Z.Wb(3,"div"),Z.Wb(4,"div"),Z.Zb())}function B(e,t){if(1&e&&(Z.ac(0,"div",27),Z.Bc(1,D,2,1,"ul",28),Z.Bc(2,A,5,0,"div",29),Z.Zb()),2&e){var n=Z.lc();Z.Jb(1),Z.pc("ngIf",n.googleLocationsNameList),Z.Jb(1),Z.pc("ngIf",!n.googleLocationsNameList)}}function q(e,t){1&e&&(Z.ac(0,"span",34),Z.Cc(1),Z.mc(2,"translate"),Z.Zb()),2&e&&(Z.Jb(1),Z.Dc(Z.nc(2,1,"name-field-required")))}function V(e,t){1&e&&(Z.ac(0,"span",34),Z.Cc(1),Z.mc(2,"translate"),Z.Zb()),2&e&&(Z.Jb(1),Z.Dc(Z.nc(2,1,"descriptioon-field-required")))}var U,N=function(e){return{"is-invalid":e}},W=((U=function(){function e(t,n,i,o,a,c,r){_classCallCheck(this,e),this.store=t,this.toaster=n,this.regionService=i,this.translate=o,this.router=a,this.render=c,this.document=r,this.title="AGM project",this.isSubmited=!1,this.uploadButtonValue="upload",this.coverUploadButtonValue="upload",this.imageName="select-image",this.fileSelected=!1,this.fileUploaded=!1,this.imagePathReady=!1,this.imageUploaded=!1,this.submitButtonValue="Waiting Uploading Image",this.showSearchResult=!1,this.googlePlaceLocation=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.router.events.subscribe((function(t){t instanceof o.c&&"/regions/add"==t.urlAfterRedirects&&e.checkCurrentLang()})),this.addRegionForm=new c.d({name:new c.b(""),description:new c.b(""),location:new c.b(""),placeId:new c.b("",c.o.required),path:new c.b("")}),this.checkLangChange(),this.getGoogleMapToken()}},{key:"location",value:function(){var e=this;this.googlePlaceLocation=[];var t=this.addRegionForm.get("description").value,n=setInterval((function(){var i=e.document.getElementById("app_root"),o=i.getAttribute("placeid"),a=i.getAttribute("lan"),r=i.getAttribute("lat"),l=i.getAttribute("formattedAddress");o&&e.googlePlaceID!=o&&(e.showSearchResult=!1,e.googlePlaceID=o,e.googlePlaceLocation.push(a,r),e.addRegionForm=new c.d({name:new c.b(l),description:new c.b(t),location:new c.b(e.googlePlaceLocation),placeId:new c.b(e.googlePlaceID),path:new c.b("")}),console.log("from compoentns placeId : ",o,e.googlePlaceLocation),clearInterval(n))}),100)}},{key:"getGoogleMapToken",value:function(){var e=this;this.regionService.getGoogleMapToken().subscribe((function(t){return e.googleMapToken=t.Data}))}},{key:"searchLocation",value:function(e){this.showSearchResult=!0,""==e.target.value&&(this.showSearchResult=!1)}},{key:"getLocationInfo",value:function(e){var t,n,i=this.addRegionForm.get("description").value;e&&(this.showSearchResult=!1,this.addRegionForm=new c.d({name:new c.b(null==e?void 0:e.description),description:new c.b(i),location:new c.b(null===(n=null===(t=null==e?void 0:e.structured_formatting)||void 0===t?void 0:t.main_text_matched_substrings)||void 0===n?void 0:n.length),placeId:new c.b(null==e?void 0:e.place_id),path:new c.b("")}))}},{key:"updateName",value:function(e){var t=e.files[0];this.uploadButtonValue="Upload",this.imageName=t.name,this.fileSelected=!0}},{key:"processFile",value:function(e){var t=this;this.fileSelected=!1,this.imageUploaded=!0,this.uploadButtonValue="Uploading...",console.log("Processing File");var n=e.files[0],i=new FileReader;i.addEventListener("load",(function(e){t.selectedFile=new r.a(e.target.result,n),t.regionService.uploadImage(t.selectedFile.file).subscribe((function(e){console.log(e),t.imageUrl=e,t.uploadButtonValue="uploaded",t.imagePathReady=!0,t.imageUploaded=!1,t.submitButtonValue="new-region"}),(function(e){t.uploadButtonValue="upload",t.fileSelected=!0,t.imageUploaded=!1,t.toaster.error("Network Error, Please Try After a Few Seconds"),console.log(e)}))})),i.readAsDataURL(n)}},{key:"checkCurrentLang",value:function(){var e=this,t=0,n=setInterval((function(){t++,"ar"==e.translate.currentLang?(e.render.removeClass(e.document.querySelector(".input-group-custom"),"input-group"),e.render.addClass(e.document.querySelector(".input-group-custom"),"input-group-ar")):(e.render.addClass(e.document.querySelector(".input-group-custom"),"input-group"),e.render.removeClass(e.document.querySelector(".input-group-custom"),"input-group-ar")),2==t&&clearInterval(n)}),200)}},{key:"checkLangChange",value:function(){var e=this;this.translate.onLangChange.subscribe((function(t){"ar"==(null==t?void 0:t.lang)?(e.render.removeClass(e.document.querySelector(".input-group-custom"),"input-group"),e.render.addClass(e.document.querySelector(".input-group-custom"),"input-group-ar")):(e.render.addClass(e.document.querySelector(".input-group-custom"),"input-group"),e.render.removeClass(e.document.querySelector(".input-group-custom"),"input-group-ar"))}))}},{key:"onSubmit",value:function(){if(!this.addRegionForm.valid)return this.toaster.error("Error : Form Not Valid"),this.isSubmited=!1,!1;var e=this.addRegionForm.getRawValue();e.path=this.imageUrl,console.log(e),this.store.dispatch(v({region:e}))}},{key:"ngOnDestroy",value:function(){localStorage.removeItem("place_id")}}]),e}()).\u0275fac=function(e){return new(e||U)(Z.Vb(l.h),Z.Vb(R.b),Z.Vb(J),Z.Vb(j.d),Z.Vb(o.d),Z.Vb(Z.K),Z.Vb(a.e))},U.\u0275cmp=Z.Pb({type:U,selectors:[["app-add-region"]],viewQuery:function(e,t){var n;1&e&&Z.Ic(S,!0),2&e&&Z.tc(n=Z.jc())&&(t.searchElementRef=n.first)},decls:49,vars:42,consts:[[1,"container-fluid"],[1,"content-header"],[1,"text-center","my-5"],[1,"card","card-info"],[1,"card-header","bg-sidebar-item-button","text-white"],[1,"card-title","mb-0"],[3,"formGroup","ngSubmit"],[1,"card-body"],[1,"form-group"],["for","inputNameSuccess",1,"col-form-label"],["type","text","id","pac-input","name","name","formControlName","name","autocomplete","off",1,"form-control","controls",3,"ngClass","placeholder","change","keydown"],["class","location-search-result px-3 py-2",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["for","exampleInputdescription1"],["name","description","formControlName","description","id","exampleInputdescription1",1,"form-control",3,"ngClass","placeholder"],["for","exampleInputupload"],[1,"input-group","input-group-custom"],[1,"custom-file"],["type","file","accept","image/*","id","file-input",1,"custom-file-input",3,"change"],["imageInput",""],["for","file-input",1,"custom-file-label"],[1,"input-group-append"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"card-footer"],["type","submit",1,"btn","bg-sidebar-item-button","text-white",3,"disabled"],[1,"container"],["id","map"],[1,"location-search-result","px-3","py-2"],["class","list-unstyled mb-0",4,"ngIf"],["class","lds-ring",4,"ngIf"],[1,"list-unstyled","mb-0"],["class","pb-1",3,"click",4,"ngFor","ngForOf"],[1,"pb-1",3,"click"],[1,"lds-ring"],[1,"invalid-feedback"]],template:function(e,t){if(1&e){var n=Z.bc();Z.ac(0,"div",0),Z.ac(1,"div",1),Z.ac(2,"h1",2),Z.Cc(3),Z.mc(4,"translate"),Z.Zb(),Z.Zb(),Z.ac(5,"div",3),Z.ac(6,"div",4),Z.ac(7,"h3",5),Z.Cc(8),Z.mc(9,"translate"),Z.Zb(),Z.Zb(),Z.ac(10,"form",6),Z.ic("ngSubmit",(function(){return t.onSubmit()})),Z.ac(11,"div",7),Z.ac(12,"div",8),Z.ac(13,"label",9),Z.Cc(14),Z.mc(15,"translate"),Z.Zb(),Z.ac(16,"input",10),Z.ic("change",(function(){return t.location()}))("keydown",(function(e){return t.searchLocation(e)})),Z.mc(17,"translate"),Z.Zb(),Z.Bc(18,B,3,2,"div",11),Z.Bc(19,q,3,3,"span",12),Z.Zb(),Z.ac(20,"div",8),Z.ac(21,"label",13),Z.Cc(22),Z.mc(23,"translate"),Z.Zb(),Z.ac(24,"textarea",14),Z.mc(25,"translate"),Z.Cc(26,"                    "),Z.Zb(),Z.Bc(27,V,3,3,"span",12),Z.Zb(),Z.ac(28,"div",8),Z.ac(29,"label",15),Z.Cc(30),Z.mc(31,"translate"),Z.Zb(),Z.ac(32,"div",16),Z.ac(33,"div",17),Z.ac(34,"input",18,19),Z.ic("change",(function(){Z.wc(n);var e=Z.uc(35);return t.updateName(e)})),Z.Zb(),Z.ac(36,"label",20),Z.Cc(37),Z.mc(38,"translate"),Z.Zb(),Z.Zb(),Z.ac(39,"div",21),Z.ac(40,"button",22),Z.ic("click",(function(){Z.wc(n);var e=Z.uc(35);return t.processFile(e)})),Z.Cc(41),Z.mc(42,"translate"),Z.Zb(),Z.Zb(),Z.Zb(),Z.Zb(),Z.Zb(),Z.ac(43,"div",23),Z.ac(44,"button",24),Z.Cc(45),Z.mc(46,"translate"),Z.Zb(),Z.Zb(),Z.Zb(),Z.Zb(),Z.Zb(),Z.ac(47,"div",25),Z.Wb(48,"div",26),Z.Zb()}2&e&&(Z.Jb(3),Z.Dc(Z.nc(4,18,"create-region-page")),Z.Jb(5),Z.Dc(Z.nc(9,20,"new-region")),Z.Jb(2),Z.pc("formGroup",t.addRegionForm),Z.Jb(4),Z.Dc(Z.nc(15,22,"name")),Z.Jb(2),Z.qc("placeholder",Z.nc(17,24,"name-type-placeholder")),Z.pc("ngClass",Z.sc(38,N,t.addRegionForm.get("name").errors&&(t.addRegionForm.get("name").touched||t.addRegionForm.get("name").dirty))),Z.Jb(2),Z.pc("ngIf",t.showSearchResult),Z.Jb(1),Z.pc("ngIf",null==t.addRegionForm.get("name").errors?null:t.addRegionForm.get("name").errors.required),Z.Jb(3),Z.Dc(Z.nc(23,26,"description")),Z.Jb(2),Z.qc("placeholder",Z.nc(25,28,"description-type-placeholder")),Z.pc("ngClass",Z.sc(40,N,t.addRegionForm.get("description").errors&&(t.addRegionForm.get("description").touched||t.addRegionForm.get("description").dirty))),Z.Jb(3),Z.pc("ngIf",null==t.addRegionForm.get("description").errors?null:t.addRegionForm.get("description").errors.required),Z.Jb(3),Z.Dc(Z.nc(31,30,"upload")),Z.Jb(7),Z.Dc(Z.nc(38,32,t.imageName)),Z.Jb(3),Z.pc("disabled",!t.fileSelected),Z.Jb(1),Z.Ec(" ",Z.nc(42,34,t.uploadButtonValue)," "),Z.Jb(3),Z.pc("disabled",t.addRegionForm.invalid||t.imageUploaded),Z.Jb(1),Z.Dc(Z.nc(46,36,"create")))},directives:[c.q,c.h,c.e,c.a,c.g,c.c,a.l,a.n,a.m],pipes:[j.c],styles:['.location-search-result[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:5px}.location-search-result[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}.location-search-result[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{transition:all .5s ease;background:rgba(54,72,94,.92);color:#fff;border-radius:5px;padding-left:10px}.location-search-result[_ngcontent-%COMP%]   .lds-ring[_ngcontent-%COMP%]{display:block;position:inherit;width:64px;height:64px;margin-left:auto;margin-right:auto}.card-footer[_ngcontent-%COMP%]   .btn.bg-sidebar-item-button[_ngcontent-%COMP%]:hover{background:rgba(54,72,94,.8)}.input-group-ar[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]{position:relative;flex:1 1 auto;width:1%;margin-bottom:0}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]   .custom-file-input[_ngcontent-%COMP%]{width:100%;min-width:14rem;max-width:100%;height:calc(2.25rem + 2px);margin:0;opacity:0}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]   .custom-file-label[_ngcontent-%COMP%]{position:absolute;top:0;right:0;left:0;z-index:1;height:calc(2.25rem + 2px);padding:.375rem .75rem;line-height:1.5;color:#495057;background-color:#fff;border:1px solid #ced4da;border-radius:.25rem}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]   .custom-file-label[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;bottom:0;z-index:3;display:block;height:2.25rem;padding:.375rem .75rem;line-height:1.5;color:#495057;content:"Browse";background-color:#e9ecef;border-left:1px solid #ced4da;border-radius:.25rem 0 0 .25rem}#map[_ngcontent-%COMP%], body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0}#description[_ngcontent-%COMP%]{font-family:Roboto;font-size:15px;font-weight:300}#infowindow-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700}#infowindow-content[_ngcontent-%COMP%]{display:none}#map[_ngcontent-%COMP%]   #infowindow-content[_ngcontent-%COMP%]{display:inline}.pac-card[_ngcontent-%COMP%]{margin:10px 10px 0 0;border-radius:2px 0 0 2px;box-sizing:border-box;-moz-box-sizing:border-box;outline:none;box-shadow:0 2px 6px rgba(0,0,0,.3);background-color:#fff;font-family:Roboto}#pac-container[_ngcontent-%COMP%]{padding-bottom:12px;margin-right:12px}.pac-controls[_ngcontent-%COMP%]{display:inline-block;padding:5px 11px}.pac-controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Roboto;font-size:13px;font-weight:300}#pac-input[_ngcontent-%COMP%]:focus{border-color:#4d90fe}#title[_ngcontent-%COMP%]{color:#fff;background-color:#4d90fe;font-size:25px;font-weight:500;padding:6px 12px}#target[_ngcontent-%COMP%]{width:345px}']}),U),T=n("R0sL"),E=Object(T.a)(),$=E.getInitialState({Data:void 0,regionDetails:void 0,error:void 0}),G=Object(l.p)($,Object(l.r)(u,(function(e,t){return E.setAll(t.Data,e)})),Object(l.r)(b,(function(e,t){return Object.assign(Object.assign({},e),{regionDetails:t.region})})),Object(l.r)(m,(function(e,t){return E.removeOne(t.id,e)})),Object(l.r)(v,(function(e,t){return E.addOne(t.region,e)})),Object(l.r)(P,(function(e,t){return E.updateOne(t.region,e)}))),z=E.getSelectors().selectAll,H=Object(l.o)("regions"),K=Object(l.q)(H,z),X=Object(l.q)(H,(function(e){return e.regionDetails})),Y=n("oOf3");function Q(e,t){if(1&e){var n=Z.bc();Z.ac(0,"tr"),Z.ac(1,"td"),Z.Wb(2,"img",11),Z.Zb(),Z.ac(3,"td"),Z.Cc(4),Z.Zb(),Z.ac(5,"td",12),Z.Cc(6),Z.Zb(),Z.ac(7,"td"),Z.Cc(8),Z.Zb(),Z.ac(9,"td"),Z.Cc(10),Z.Zb(),Z.ac(11,"td"),Z.ac(12,"a",13),Z.Cc(13),Z.mc(14,"translate"),Z.Zb(),Z.ac(15,"a",14),Z.ic("click",(function(){Z.wc(n);var e=t.$implicit;return Z.lc(2).delete(null==e?null:e.id)})),Z.Cc(16),Z.mc(17,"translate"),Z.Zb(),Z.ac(18,"a",15),Z.Cc(19),Z.mc(20,"translate"),Z.Zb(),Z.Zb(),Z.Zb()}if(2&e){var i=t.$implicit,o=Z.lc(2);Z.Jb(2),Z.qc("src",null==i||null==i.path[0]?null:i.path[0].path,Z.yc),Z.rc("alt","",i.name," Image"),Z.Jb(2),Z.Dc(i.name?i.name:"-"),Z.Jb(2),Z.Dc(i.description?i.description:"-"),Z.Jb(2),Z.Dc(i.commentNumber?i.commentNumber:"-"),Z.Jb(2),Z.Dc(i.ratingAverage?i.ratingAverage:"-"),Z.Jb(2),Z.rc("routerLink","/regions/edit/",null==i?null:i.id,""),Z.Jb(1),Z.Ec(" ",Z.nc(14,14,"update")," "),Z.Jb(2),Z.Mb("btn btn-danger confirm btn-sm mr-1 mb-1 ",o.isDeleted?"disabled":"",""),Z.Jb(1),Z.Ec(" ",Z.nc(17,16,"delete")," "),Z.Jb(2),Z.rc("routerLink","/regions/",null==i?null:i.id,""),Z.Jb(1),Z.Ec(" ",Z.nc(20,18,"view")," ")}}function ee(e,t){if(1&e){var n=Z.bc();Z.ac(0,"div"),Z.ac(1,"h1",1),Z.Cc(2),Z.mc(3,"translate"),Z.Zb(),Z.ac(4,"div",2),Z.ac(5,"div",3),Z.ac(6,"div",4),Z.ac(7,"input",5),Z.ic("ngModelChange",(function(e){return Z.wc(n),Z.lc().name=e}))("keyup",(function(){return Z.wc(n),Z.lc().applyFilter()})),Z.mc(8,"translate"),Z.mc(9,"translate"),Z.Zb(),Z.Zb(),Z.Zb(),Z.Zb(),Z.ac(10,"div",6),Z.ac(11,"table",7),Z.ac(12,"tr",8),Z.ac(13,"td"),Z.Cc(14),Z.mc(15,"translate"),Z.Zb(),Z.ac(16,"td"),Z.Cc(17),Z.mc(18,"translate"),Z.Zb(),Z.ac(19,"td"),Z.Cc(20),Z.mc(21,"translate"),Z.Zb(),Z.ac(22,"td"),Z.Cc(23),Z.mc(24,"translate"),Z.Zb(),Z.ac(25,"td"),Z.Cc(26),Z.mc(27,"translate"),Z.Zb(),Z.ac(28,"td"),Z.Cc(29),Z.mc(30,"translate"),Z.Zb(),Z.Zb(),Z.Bc(31,Q,21,20,"tr",9),Z.mc(32,"paginate"),Z.Zb(),Z.ac(33,"pagination-controls",10),Z.ic("pageChange",(function(e){return Z.wc(n),Z.lc().pageChanged(e)})),Z.mc(34,"translate"),Z.mc(35,"translate"),Z.mc(36,"translate"),Z.Zb(),Z.Zb(),Z.Zb()}if(2&e){var i=Z.lc();Z.Jb(2),Z.Dc(Z.nc(3,14,"manage-regions-page")),Z.Jb(5),Z.qc("placeholder",Z.nc(8,16,"region-search-input")),Z.qc("title",Z.nc(9,18,"region-search-input")),Z.pc("ngModel",i.name),Z.Jb(7),Z.Dc(Z.nc(15,20,"image")),Z.Jb(3),Z.Dc(Z.nc(18,22,"name")),Z.Jb(3),Z.Dc(Z.nc(21,24,"description")),Z.Jb(3),Z.Dc(Z.nc(24,26,"comment-number")),Z.Jb(3),Z.Dc(Z.nc(27,28,"rating-average")),Z.Jb(3),Z.Dc(Z.nc(30,30,"control")),Z.Jb(2),Z.pc("ngForOf",Z.oc(32,32,i.regionsList,i.config)),Z.Jb(2),Z.qc("previousLabel",Z.nc(34,35,"prev")),Z.qc("nextLabel",Z.nc(35,37,"next")),Z.qc("screenReaderCurrentLabel",Z.nc(36,39,"you-are-on-page"))}}function te(e,t){1&e&&(Z.ac(0,"div"),Z.ac(1,"div",16),Z.Wb(2,"div"),Z.Wb(3,"div"),Z.Wb(4,"div"),Z.Wb(5,"div"),Z.Zb(),Z.Zb())}var ne,ie=((ne=function(){function e(t){_classCallCheck(this,e),this.store=t,this.regionsList=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.store.dispatch(s()),this.getAllRegions()}},{key:"getAllRegions",value:function(){var e=this;this.regionsSubscription=this.store.select(K).subscribe((function(t){e.regions=t,e.regionsList=t})),this.config={itemsPerPage:5,currentPage:1,totalItems:this.regionsList.length}}},{key:"pageChanged",value:function(e){this.config.currentPage=e}},{key:"delete",value:function(e){var t=this;if(!confirm("Are You Sure You Want To Delete This Region"))return!1;this.isDeleted=!0,this.store.dispatch(m({id:e})),setTimeout((function(){t.isDeleted=!1}),1e3)}},{key:"applyFilter",value:function(){var e=this;this.name?(this.regionsList=[],this.regionsList=this.regions.filter((function(t){if(t.name){var n=t.name.toLocaleLowerCase().match(e.name.toLocaleLowerCase());if(n)return n}}))):this.regionsList=_toConsumableArray(this.regions)}},{key:"ngOnDestroy",value:function(){this.regionsSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||ne)(Z.Vb(l.h))},ne.\u0275cmp=Z.Pb({type:ne,selectors:[["app-all-regions"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"text-center","details-title","my-4"],[1,"row"],[1,"col-10","col-sm-8","col-md-6","col-xl-4"],[1,"form-group","mb-4"],["id","exampleFormControlInput2","type","text",1,"form-control","form-control-underlined","border-primary","search-input",3,"ngModel","placeholder","title","ngModelChange","keyup"],[1,"table-responsive","text-center"],[1,"table","table-bordered","main-table"],[1,"bg-dark","text-white"],[4,"ngFor","ngForOf"],["autoHide","true","maxSize","5","responsive","true","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page",1,"my-pagination",3,"previousLabel","nextLabel","screenReaderCurrentLabel","pageChange"],[1,"img-thumbnail","img-custom",3,"src","alt"],[1,"td-custom"],[1,"btn","btn-success","btn-sm","mr-1","mb-1",3,"routerLink"],[3,"click"],[1,"btn","bg-light-blue","text-white","btn-sm","mr-1","mb-1",3,"routerLink"],[1,"lds-ring"]],template:function(e,t){1&e&&(Z.Bc(0,ee,37,41,"div",0),Z.Bc(1,te,6,0,"div",0)),2&e&&(Z.pc("ngIf",0!=t.regions.length),Z.Jb(1),Z.pc("ngIf",0==t.regions.length))},directives:[a.n,c.a,c.g,c.j,a.m,Y.c,o.f],pipes:[j.c,Y.b],styles:["agm-map[_ngcontent-%COMP%]{height:300px}"]}),ne);function oe(e,t){if(1&e){var n=Z.bc();Z.ac(0,"li",32),Z.ic("click",(function(){Z.wc(n);var e=t.$implicit;return Z.lc(3).getLocationInfo(e)})),Z.Cc(1),Z.Zb()}if(2&e){var i=t.$implicit;Z.Jb(1),Z.Dc(null==i?null:i.description)}}function ae(e,t){if(1&e&&(Z.ac(0,"ul",30),Z.Bc(1,oe,2,1,"li",31),Z.Zb()),2&e){var n=Z.lc(2);Z.Jb(1),Z.pc("ngForOf",n.googleLocationsNameList)}}function ce(e,t){1&e&&(Z.ac(0,"div",33),Z.Wb(1,"div"),Z.Wb(2,"div"),Z.Wb(3,"div"),Z.Wb(4,"div"),Z.Zb())}function re(e,t){if(1&e&&(Z.ac(0,"div",27),Z.Bc(1,ae,2,1,"ul",28),Z.Bc(2,ce,5,0,"div",29),Z.Zb()),2&e){var n=Z.lc();Z.Jb(1),Z.pc("ngIf",n.googleLocationsNameList),Z.Jb(1),Z.pc("ngIf",!n.googleLocationsNameList)}}function le(e,t){1&e&&(Z.ac(0,"span",34),Z.Cc(1),Z.mc(2,"translate"),Z.Zb()),2&e&&(Z.Jb(1),Z.Dc(Z.nc(2,1,"name-field-required")))}function se(e,t){1&e&&(Z.ac(0,"span",34),Z.Cc(1),Z.mc(2,"translate"),Z.Zb()),2&e&&(Z.Jb(1),Z.Dc(Z.nc(2,1,"descriptioon-field-required")))}function ue(e,t){1&e&&(Z.ac(0,"span",34),Z.Cc(1,"description Must Be Greater Than 3"),Z.Zb())}var de,ge=function(e){return{"is-invalid":e}},be=((de=function(){function e(t,n,i,o,a,c,r){_classCallCheck(this,e),this.store=t,this.regionService=n,this.toaster=i,this.translate=o,this.render=a,this.document=c,this.activatedRoute=r,this.isSubmited=!1,this.uploadButtonValue="upload",this.coverUploadButtonValue="upload",this.imageName="select-image",this.fileSelected=!1,this.fileUploaded=!1,this.imagePathReady=!1,this.imageUploaded=!1,this.submitButtonValue="Waiting Uploading Image",this.showSearchResult=!1,this.googlePlaceLocation=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.activatedRoute.paramMap.subscribe((function(t){var n=t.get("id");e.store.dispatch(g({id:+n}))})),this.editRegionForm=new c.d({name:new c.b(""),description:new c.b(""),location:new c.b(""),path:new c.b(""),placeId:new c.b("",c.o.required)}),this.checkLangChange(),this.getRegion(),this.getGoogleMapToken()}},{key:"getGoogleMapToken",value:function(){var e=this;this.regionService.getGoogleMapToken().subscribe((function(t){return e.googleMapToken=t.Data}))}},{key:"getRegion",value:function(){var e=this;this.store.select(X).subscribe((function(t){t&&(e.regionData=t,e.fillForms(t))}))}},{key:"location",value:function(){var e=this;this.googlePlaceLocation=[];var t=this.editRegionForm.get("description").value,n=setInterval((function(){var i=e.document.getElementById("app_root"),o=i.getAttribute("placeid"),a=i.getAttribute("lan"),r=i.getAttribute("lat"),l=i.getAttribute("formattedAddress");o&&e.googlePlaceID!=o&&(e.showSearchResult=!1,e.googlePlaceID=o,e.googlePlaceLocation.push(a,r),e.editRegionForm=new c.d({name:new c.b(l),description:new c.b(t),location:new c.b(e.googlePlaceLocation),placeId:new c.b(e.googlePlaceID),path:new c.b("")}),console.log("from compoentns placeId : ",o,e.googlePlaceLocation),clearInterval(n))}),100)}},{key:"fillForms",value:function(e){this.editRegionForm=new c.d({id:new c.b(e.id),name:new c.b(e.name),description:new c.b(e.description),location:new c.b(e.location),path:new c.b(e.path),placeId:new c.b(e.placeId)})}},{key:"searchLocation",value:function(e){this.showSearchResult=!0,""==e.target.value&&(this.showSearchResult=!1)}},{key:"getLocationInfo",value:function(e){var t,n=this.regionData.id,i=this.editRegionForm.get("description").value;e&&(this.showSearchResult=!1,this.editRegionForm=new c.d({id:new c.b(n),name:new c.b(null==e?void 0:e.description),description:new c.b(i),location:new c.b(null===(t=null==e?void 0:e.structured_formatting)||void 0===t?void 0:t.main_text_matched_substrings.length),placeId:new c.b(null==e?void 0:e.place_id),path:new c.b("")}))}},{key:"checkLangChange",value:function(){var e=this;this.translate.onLangChange.subscribe((function(t){console.log("lang change to : ",t),"ar"==t.lang?(console.log("lang : ",t.lang),e.render.removeClass(e.document.querySelector(".input-group-custom"),"input-group"),e.render.addClass(e.document.querySelector(".input-group-custom"),"input-group-ar")):(e.render.addClass(e.document.querySelector(".input-group-custom"),"input-group"),e.render.removeClass(e.document.querySelector(".input-group-custom"),"input-group-ar"))}))}},{key:"updateName",value:function(e){var t=e.files[0];this.uploadButtonValue="Upload",this.imageName=t.name,this.fileSelected=!0}},{key:"processFile",value:function(e){var t=this;this.fileSelected=!1,this.uploadButtonValue="Uploading...",this.imageUploaded=!0,console.log("Processing File");var n=e.files[0],i=new FileReader;i.addEventListener("load",(function(e){t.selectedFile=new r.a(e.target.result,n),t.regionService.uploadImage(t.selectedFile.file).subscribe((function(e){console.log(e),t.imageUrl=e,t.uploadButtonValue="uploaded",t.imagePathReady=!0,t.imageUploaded=!1,t.submitButtonValue="update"}),(function(e){t.uploadButtonValue="upload",t.fileSelected=!0,t.imageUploaded=!1,t.toaster.error("Network Error, Please Try After a Few Seconds"),console.log(e)}))})),i.readAsDataURL(n)}},{key:"onSubmit",value:function(){if(!this.editRegionForm.valid)return this.toaster.error("Error : Form Not Valid"),this.isSubmited=!1,!1;var e=this.editRegionForm.getRawValue();e.path=this.imageUrl,e.path=this.imageUrl?this.imageUrl:this.regionData.regionImage[0].pathURL,console.log(e),this.store.dispatch(O({region:e}))}}]),e}()).\u0275fac=function(e){return new(e||de)(Z.Vb(l.h),Z.Vb(J),Z.Vb(R.b),Z.Vb(j.d),Z.Vb(Z.K),Z.Vb(a.e),Z.Vb(o.a))},de.\u0275cmp=Z.Pb({type:de,selectors:[["app-edit-region"]],decls:50,vars:43,consts:[[1,"container-fluid"],[1,"content-header"],[1,"text-center","my-5"],[1,"card","card-info"],[1,"card-header","bg-sidebar-item-button","text-white"],[1,"card-title","mb-0"],[3,"formGroup","ngSubmit"],[1,"card-body"],[1,"form-group"],["for","inputNameSuccess",1,"col-form-label"],["type","text","id","pac-input","name","name","formControlName","name","autocomplete","off",1,"form-control","controls",3,"ngClass","placeholder","change","keydown"],["class","location-search-result px-3 py-2",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["for","exampleInputdescription1"],["name","description","formControlName","description","id","exampleInputdescription1",1,"form-control",3,"ngClass","placeholder"],["for","exampleInputupload"],[1,"input-group","input-group-custom"],[1,"custom-file"],["type","file","accept","image/*","id","file-input",1,"custom-file-input",3,"change"],["imageInput",""],["for","file-input",1,"custom-file-label"],[1,"input-group-append"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"card-footer"],["type","submit",1,"btn","bg-sidebar-item-button","text-white",3,"disabled"],[1,"container"],["id","map"],[1,"location-search-result","px-3","py-2"],["class","list-unstyled mb-0",4,"ngIf"],["class","lds-ring",4,"ngIf"],[1,"list-unstyled","mb-0"],["class","pb-1",3,"click",4,"ngFor","ngForOf"],[1,"pb-1",3,"click"],[1,"lds-ring"],[1,"invalid-feedback"]],template:function(e,t){if(1&e){var n=Z.bc();Z.ac(0,"div",0),Z.ac(1,"div",1),Z.ac(2,"h1",2),Z.Cc(3),Z.mc(4,"translate"),Z.Zb(),Z.Zb(),Z.ac(5,"div",3),Z.ac(6,"div",4),Z.ac(7,"h3",5),Z.Cc(8),Z.mc(9,"translate"),Z.Zb(),Z.Zb(),Z.ac(10,"form",6),Z.ic("ngSubmit",(function(){return t.onSubmit()})),Z.ac(11,"div",7),Z.ac(12,"div",8),Z.ac(13,"label",9),Z.Cc(14),Z.mc(15,"translate"),Z.Zb(),Z.ac(16,"input",10),Z.ic("change",(function(){return t.location()}))("keydown",(function(e){return t.searchLocation(e)})),Z.mc(17,"translate"),Z.Zb(),Z.Bc(18,re,3,2,"div",11),Z.Bc(19,le,3,3,"span",12),Z.Zb(),Z.ac(20,"div",8),Z.ac(21,"label",13),Z.Cc(22),Z.mc(23,"translate"),Z.Zb(),Z.ac(24,"textarea",14),Z.mc(25,"translate"),Z.Cc(26,"                    "),Z.Zb(),Z.Bc(27,se,3,3,"span",12),Z.Bc(28,ue,2,0,"span",12),Z.Zb(),Z.ac(29,"div",8),Z.ac(30,"label",15),Z.Cc(31),Z.mc(32,"translate"),Z.Zb(),Z.ac(33,"div",16),Z.ac(34,"div",17),Z.ac(35,"input",18,19),Z.ic("change",(function(){Z.wc(n);var e=Z.uc(36);return t.updateName(e)})),Z.Zb(),Z.ac(37,"label",20),Z.Cc(38),Z.mc(39,"translate"),Z.Zb(),Z.Zb(),Z.ac(40,"div",21),Z.ac(41,"button",22),Z.ic("click",(function(){Z.wc(n);var e=Z.uc(36);return t.processFile(e)})),Z.Cc(42),Z.mc(43,"translate"),Z.Zb(),Z.Zb(),Z.Zb(),Z.Zb(),Z.Zb(),Z.ac(44,"div",23),Z.ac(45,"button",24),Z.Cc(46),Z.mc(47,"translate"),Z.Zb(),Z.Zb(),Z.Zb(),Z.Zb(),Z.Zb(),Z.ac(48,"div",25),Z.Wb(49,"div",26),Z.Zb()}2&e&&(Z.Jb(3),Z.Dc(Z.nc(4,19,"update-region-page")),Z.Jb(5),Z.Dc(Z.nc(9,21,"update-region")),Z.Jb(2),Z.pc("formGroup",t.editRegionForm),Z.Jb(4),Z.Dc(Z.nc(15,23,"name")),Z.Jb(2),Z.qc("placeholder",Z.nc(17,25,"name-type-placeholder")),Z.pc("ngClass",Z.sc(39,ge,t.editRegionForm.get("name").errors&&(t.editRegionForm.get("name").touched||t.editRegionForm.get("name").dirty))),Z.Jb(2),Z.pc("ngIf",t.showSearchResult),Z.Jb(1),Z.pc("ngIf",null==t.editRegionForm.get("name").errors?null:t.editRegionForm.get("name").errors.required),Z.Jb(3),Z.Dc(Z.nc(23,27,"description")),Z.Jb(2),Z.qc("placeholder",Z.nc(25,29,"description-type-placeholder")),Z.pc("ngClass",Z.sc(41,ge,t.editRegionForm.get("description").errors&&(t.editRegionForm.get("description").touched||t.editRegionForm.get("description").dirty))),Z.Jb(3),Z.pc("ngIf",null==t.editRegionForm.get("description").errors?null:t.editRegionForm.get("description").errors.required),Z.Jb(1),Z.pc("ngIf",null==t.editRegionForm.get("description").errors?null:t.editRegionForm.get("description").errors.minlength),Z.Jb(3),Z.Dc(Z.nc(32,31,"upload")),Z.Jb(7),Z.Dc(Z.nc(39,33,t.imageName)),Z.Jb(3),Z.pc("disabled",!t.fileSelected),Z.Jb(1),Z.Ec(" ",Z.nc(43,35,t.uploadButtonValue)," "),Z.Jb(3),Z.pc("disabled",t.editRegionForm.invalid||t.imageUploaded),Z.Jb(1),Z.Dc(Z.nc(47,37,"update")))},directives:[c.q,c.h,c.e,c.a,c.g,c.c,a.l,a.n,a.m],pipes:[j.c],styles:['.location-search-result[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:5px}.location-search-result[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}.location-search-result[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{transition:all .5s ease;background:rgba(54,72,94,.92);color:#fff;border-radius:5px;padding-left:10px}.location-search-result[_ngcontent-%COMP%]   .lds-ring[_ngcontent-%COMP%]{display:block;position:inherit;width:64px;height:64px;margin-left:auto;margin-right:auto}.card-footer[_ngcontent-%COMP%]   .btn.bg-sidebar-item-button[_ngcontent-%COMP%]:hover{background:rgba(54,72,94,.8)}.input-group-ar[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]{position:relative;flex:1 1 auto;width:1%;margin-bottom:0}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]   .custom-file-input[_ngcontent-%COMP%]{width:100%;min-width:14rem;max-width:100%;height:calc(2.25rem + 2px);margin:0;opacity:0}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]   .custom-file-label[_ngcontent-%COMP%]{position:absolute;top:0;right:0;left:0;z-index:1;height:calc(2.25rem + 2px);padding:.375rem .75rem;line-height:1.5;color:#495057;background-color:#fff;border:1px solid #ced4da;border-radius:.25rem}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]   .custom-file-label[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;bottom:0;z-index:3;display:block;height:2.25rem;padding:.375rem .75rem;line-height:1.5;color:#495057;content:"Browse";background-color:#e9ecef;border-left:1px solid #ced4da;border-radius:.25rem 0 0 .25rem}']}),de);function pe(e,t){if(1&e&&(Z.ac(0,"li",26),Z.ac(1,"p",27),Z.Cc(2),Z.mc(3,"translate"),Z.ac(4,"span",28),Z.Cc(5),Z.Zb(),Z.Zb(),Z.Zb()),2&e){var n=Z.lc(2);Z.Jb(2),Z.Ec("",Z.nc(3,2,"rating")," : "),Z.Jb(3),Z.Dc(null==n.region?null:n.region.ratingAverage)}}function me(e,t){if(1&e&&(Z.ac(0,"li",26),Z.ac(1,"p"),Z.ac(2,"b"),Z.Cc(3),Z.mc(4,"translate"),Z.Zb(),Z.Wb(5,"br"),Z.ac(6,"span",29),Z.Cc(7),Z.Zb(),Z.Zb(),Z.Zb()),2&e){var n=Z.lc(2);Z.Jb(3),Z.Ec("",Z.nc(4,2,"description")," :"),Z.Jb(4),Z.Dc(null==n.region?null:n.region.description)}}function fe(e,t){1&e&&(Z.ac(0,"div",15),Z.ac(1,"h3",30),Z.Cc(2),Z.mc(3,"translate"),Z.Zb(),Z.Zb()),2&e&&(Z.Jb(2),Z.Ec("",Z.nc(3,1,"guides")," :"))}function he(e,t){if(1&e&&(Z.ac(0,"span",39),Z.Cc(1),Z.Zb()),2&e){var n=t.$implicit;Z.Jb(1),Z.Dc(n)}}function ve(e,t){if(1&e&&(Z.ac(0,"tr"),Z.ac(1,"td"),Z.Wb(2,"img",37),Z.Zb(),Z.ac(3,"td"),Z.Cc(4),Z.Zb(),Z.ac(5,"td"),Z.Cc(6),Z.Bc(7,he,2,1,"span",38),Z.Zb(),Z.ac(8,"td"),Z.Cc(9),Z.Zb(),Z.ac(10,"td"),Z.Cc(11),Z.mc(12,"translate"),Z.Zb(),Z.Zb()),2&e){var n=t.$implicit;Z.Jb(2),Z.qc("src",null==n?null:n.image,Z.yc),Z.rc("alt","",null==n?null:n.name," Image"),Z.Jb(2),Z.Dc(n.name?null==n?null:n.name:"-"),Z.Jb(2),Z.Ec(" ",0==(null==n||null==n.language?null:n.language.length)?"-":null," "),Z.Jb(1),Z.pc("ngForOf",null==n?null:n.language),Z.Jb(2),Z.Dc(null!=n&&n.rating?null==n?null:n.rating:"-"),Z.Jb(2),Z.Dc(null!=n&&n.status?Z.nc(12,7,null==n?null:n.status):"-")}}function Ce(e,t){if(1&e){var n=Z.bc();Z.ac(0,"div",31),Z.ac(1,"div",32),Z.ac(2,"table",33),Z.ac(3,"tr",34),Z.ac(4,"td"),Z.Cc(5),Z.mc(6,"translate"),Z.Zb(),Z.ac(7,"td"),Z.Cc(8),Z.mc(9,"translate"),Z.Zb(),Z.ac(10,"td"),Z.Cc(11),Z.mc(12,"translate"),Z.Zb(),Z.ac(13,"td"),Z.Cc(14),Z.mc(15,"translate"),Z.Zb(),Z.ac(16,"td"),Z.Cc(17),Z.mc(18,"translate"),Z.Zb(),Z.Zb(),Z.Bc(19,ve,13,9,"tr",35),Z.mc(20,"paginate"),Z.Zb(),Z.ac(21,"pagination-controls",36),Z.ic("pageChange",(function(e){return Z.wc(n),Z.lc(2).pageChanged(e)})),Z.mc(22,"translate"),Z.mc(23,"translate"),Z.mc(24,"translate"),Z.Zb(),Z.Zb(),Z.Zb()}if(2&e){var i=Z.lc(2);Z.Jb(5),Z.Dc(Z.nc(6,9,"image")),Z.Jb(3),Z.Dc(Z.nc(9,11,"name")),Z.Jb(3),Z.Dc(Z.nc(12,13,"language")),Z.Jb(3),Z.Dc(Z.nc(15,15,"rating")),Z.Jb(3),Z.Dc(Z.nc(18,17,"status")),Z.Jb(2),Z.pc("ngForOf",Z.oc(20,19,i.regionGuidesList,i.config)),Z.Jb(2),Z.qc("previousLabel",Z.nc(22,22,"prev")),Z.qc("nextLabel",Z.nc(23,24,"next")),Z.qc("screenReaderCurrentLabel",Z.nc(24,26,"you-are-on-page"))}}function ye(e,t){1&e&&(Z.ac(0,"div",15),Z.ac(1,"h3",30),Z.Cc(2),Z.mc(3,"translate"),Z.Zb(),Z.Zb()),2&e&&(Z.Jb(2),Z.Ec("",Z.nc(3,1,"comments")," :"))}function Oe(e,t){if(1&e&&(Z.ac(0,"div",40),Z.ac(1,"div",5),Z.ac(2,"div",41),Z.ac(3,"div",42),Z.Wb(4,"img",43),Z.Zb(),Z.Zb(),Z.ac(5,"div",44),Z.ac(6,"div",45),Z.ac(7,"div",46),Z.ac(8,"span",47),Z.Cc(9),Z.mc(10,"date"),Z.Zb(),Z.Zb(),Z.ac(11,"p",48),Z.Cc(12),Z.Zb(),Z.Zb(),Z.Zb(),Z.Zb(),Z.Zb()),2&e){var n=t.$implicit;Z.Jb(4),Z.qc("src",null!=n&&n.userImage?null==n?null:n.userImage:"../../../../../assets/default-avatar.jpg",Z.yc),Z.Jb(5),Z.Fc("",null==n?null:n.userName," ",null!=(null==n?null:n.date)?"( "+Z.oc(10,4,1e3*(null==n?null:n.date.timestamp),"medium")+" )":"",""),Z.Jb(3),Z.Ec(" ",null==n?null:n.comment," ")}}function Pe(e,t){if(1&e){var n=Z.bc();Z.ac(0,"div",2),Z.ac(1,"div",3),Z.ac(2,"h1",4),Z.Cc(3),Z.mc(4,"translate"),Z.Zb(),Z.ac(5,"div",5),Z.ac(6,"div",6),Z.ac(7,"div",7),Z.Wb(8,"img",8),Z.Zb(),Z.Zb(),Z.ac(9,"div",9),Z.ac(10,"div",10),Z.ac(11,"ul",11),Z.ac(12,"li"),Z.ac(13,"div",5),Z.ac(14,"div",12),Z.ac(15,"h4",13),Z.Cc(16),Z.Zb(),Z.Zb(),Z.Zb(),Z.Zb(),Z.Bc(17,pe,6,4,"li",14),Z.Bc(18,me,8,4,"li",14),Z.Zb(),Z.Zb(),Z.Zb(),Z.ac(19,"div",15),Z.Wb(20,"hr",16),Z.Zb(),Z.Bc(21,fe,4,3,"div",17),Z.Bc(22,Ce,25,28,"div",18),Z.ac(23,"div",15),Z.Wb(24,"hr",16),Z.Zb(),Z.Bc(25,ye,4,3,"div",17),Z.ac(26,"div",19),Z.Wb(27,"div",20),Z.ac(28,"div",21),Z.ac(29,"div",22),Z.Bc(30,Oe,13,7,"div",23),Z.mc(31,"paginate"),Z.Zb(),Z.Zb(),Z.ac(32,"div",24),Z.ac(33,"pagination-controls",25),Z.ic("pageChange",(function(e){return Z.wc(n),Z.lc().pagedChanged(e)})),Z.mc(34,"translate"),Z.mc(35,"translate"),Z.mc(36,"translate"),Z.Zb(),Z.Zb(),Z.Zb(),Z.Zb(),Z.Zb(),Z.Zb()}if(2&e){var i=Z.lc();Z.Jb(3),Z.Dc(Z.nc(4,13,"region-details-page")),Z.Jb(5),Z.qc("src",null==i.region||null==i.region.regionImage[0]?null:i.region.regionImage[0].path,Z.yc),Z.rc("alt","",null==i.region?null:i.region.name," Image"),Z.Jb(8),Z.Dc(null==i.region?null:i.region.name),Z.Jb(1),Z.pc("ngIf",null==i.region?null:i.region.ratingAverage),Z.Jb(1),Z.pc("ngIf",null==i.region?null:i.region.description),Z.Jb(3),Z.pc("ngIf",i.regionGuidesList.length>0),Z.Jb(1),Z.pc("ngIf",i.regionGuidesList.length>0),Z.Jb(3),Z.pc("ngIf",i.regionCommentsList.length>0),Z.Jb(5),Z.pc("ngForOf",Z.oc(31,15,i.regionCommentsList,i.paginate)),Z.Jb(3),Z.qc("previousLabel",Z.nc(34,18,"prev")),Z.qc("nextLabel",Z.nc(35,20,"next")),Z.qc("screenReaderCurrentLabel",Z.nc(36,22,"you-are-on-page"))}}function we(e,t){1&e&&(Z.ac(0,"div"),Z.ac(1,"div",49),Z.Wb(2,"div"),Z.Wb(3,"div"),Z.Wb(4,"div"),Z.Wb(5,"div"),Z.Zb(),Z.Zb())}var Ze,Re,_e,ke,Ie=[{path:"",component:ie},{path:"add",component:W},{path:":id",component:(Ze=function(){function e(t,n){_classCallCheck(this,e),this.store=t,this.activatedRoute=n,this.regionGuidesList=[],this.regionCommentsList=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.activatedRoute.paramMap.subscribe((function(t){e.store.dispatch(g({id:+t.get("id")}))})),this.getRegionDetails()}},{key:"getRegionDetails",value:function(){var e=this;this.store.select(X).subscribe((function(t){t&&(e.region=t,e.regionGuidesList=null==t?void 0:t.guides,e.regionCommentsList=null==t?void 0:t.comments,e.config={id:"region-guide",itemsPerPage:5,currentPage:1,totalItems:e.regionGuidesList.length},e.paginate={id:"region-comments",itemsPerPage:5,currentPage:1,totalItems:e.regionCommentsList.length})}))}},{key:"pageChanged",value:function(e){this.config.currentPage=e}},{key:"pagedChanged",value:function(e){this.paginate.currentPage=e}}]),e}(),Ze.\u0275fac=function(e){return new(e||Ze)(Z.Vb(l.h),Z.Vb(o.a))},Ze.\u0275cmp=Z.Pb({type:Ze,selectors:[["app-regions-details"]],decls:2,vars:2,consts:[["class","region-details",4,"ngIf"],[4,"ngIf"],[1,"region-details"],[1,"container"],[1,"my-3","details-title"],[1,"row"],[1,"col-12","col-sm-5","col-md-4","position-relative","mx-auto","text-center","mb-3"],[1,"image-details","mb-3"],[1,"img-fluid","img-thumbnail",3,"src","alt"],[1,"col-12","col-sm-6","mx-auto"],[1,"info-details"],[1,"list-unstyled"],[1,"col"],[1,"text-info"],["class","mb-2",4,"ngIf"],[1,"col-12"],[1,"w-50","mx-auto"],["class","col-12",4,"ngIf"],["class","col-12 mx-auto",4,"ngIf"],[1,"card","col-12","px-0"],[1,"card-header"],[1,"card-body","p-2"],[1,"messages-body","my-3","pt-3","p-2"],["class","comment-block",4,"ngFor","ngForOf"],[1,"card-footer","text-center"],["id","region-comments","autoHide","true","maxSize","5","responsive","true","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page",3,"previousLabel","nextLabel","screenReaderCurrentLabel","pageChange"],[1,"mb-2"],[1,"mb-0"],[1,"text-secondary"],[1,"m-1","px-1"],[1,""],[1,"col-12","mx-auto"],[1,"table-responsive","text-center"],[1,"table","table-bordered","main-table"],[1,"bg-dark","text-white"],[4,"ngFor","ngForOf"],["id","region-guide","autoHide","true","maxSize","5","responsive","true","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page",3,"previousLabel","nextLabel","screenReaderCurrentLabel","pageChange"],[1,"img-thumbnail","img-custom",3,"src","alt"],["class","m-1 px-1 rounded bg-grey-blue text-white",4,"ngFor","ngForOf"],[1,"m-1","px-1","rounded","bg-grey-blue","text-white"],[1,"comment-block"],[1,"col-2","col-lg-1","text-center","pr-0","align-self-center"],[1,"user-img"],["alt","",1,"res-image",3,"src"],[1,"col-10","col-lg-11","mt-2","mt-sm-0"],[1,"comment-body","py-2","px-3"],[1,"time"],[1,"pb-1"],[1,"comment","m-0"],[1,"lds-ring"]],template:function(e,t){1&e&&(Z.Bc(0,Pe,37,24,"div",0),Z.Bc(1,we,6,0,"div",1)),2&e&&(Z.pc("ngIf",t.region),Z.Jb(1),Z.pc("ngIf",!t.region))},directives:[a.n,a.m,Y.c],pipes:[j.c,Y.b,a.f],styles:[".region-details[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:600px}.region-details[_ngcontent-%COMP%]   .info-details[_ngcontent-%COMP%]   .img-custom[_ngcontent-%COMP%]{width:100px}.user-img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;position:relative;border:2px solid #517197;max-width:100%}.user-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%}.comment-body[_ngcontent-%COMP%]{border:1px solid #517197}.comment-body[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:rgba(54,72,94,.92)}.comment-body[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:#9e9e9e}.comment-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid transparent;background:#517197;color:#fff;margin:15px 10px;outline:none;transition:all .5s ease-in-out;-webkit-transition:all .5s ease-in-out}.comment-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:none;color:#517197;border:1px solid #517197}.comment-block[_ngcontent-%COMP%]{margin-bottom:10px}"]}),Ze)},{path:"edit/:id",component:be}],xe=((Re=function e(){_classCallCheck(this,e)}).\u0275mod=Z.Tb({type:Re}),Re.\u0275inj=Z.Sb({factory:function(e){return new(e||Re)},imports:[[o.g.forChild(Ie)],o.g]}),Re),Me=n("9jGm"),Le=n("LRne"),Je=n("5+tZ"),je=n("lJxs"),Se=n("JIr8"),Fe=n("XqQ8"),De=((_e=function e(t,n,i,o,a,c){var r=this;_classCallCheck(this,e),this.actions$=t,this.store=n,this.toaster=i,this.router=o,this.activatedRoute=a,this.regionService=c,this.loadRegions$=Object(Me.c)((function(){return r.actions$.pipe(Object(Me.d)(s),Object(Je.a)((function(){return r.regionService.getAllRegions().pipe(Object(je.a)((function(e){return u(e)})),Object(Se.a)((function(e){return console.log("error effect: ",e),e.error.error?r.toaster.error(e.error.error):e.error.msg&&r.toaster.error(e.error.msg),Object(Le.a)(d(e))})))})))})),this.loadRegion$=Object(Me.c)((function(){return r.actions$.pipe(Object(Me.d)(g),Object(Je.a)((function(e){return r.regionService.getRegion(e.id).pipe(Object(je.a)((function(e){return b({region:e.Data})})),Object(Se.a)((function(e){return console.log("error effect",e),Object(Le.a)(p({error:e}))})))})))})),this.addRegion$=Object(Me.c)((function(){return r.actions$.pipe(Object(Me.d)(v),Object(Fe.a)((function(e){return r.regionService.createRegion(e.region).pipe(Object(je.a)((function(e){return r.toaster.success(null==e?void 0:e.msg),C()})),Object(Se.a)((function(e){return console.log("error create effect",e),Object(Le.a)(y({error:e}))})))})))})),this.updateRegion$=Object(Me.c)((function(){return r.actions$.pipe(Object(Me.d)(O),Object(I.a)((function(e){return r.regionService.updateRegion(e.region).pipe(Object(je.a)((function(t){r.toaster.success(t.msg);var n={id:e.region.id,changes:Object.assign({},e.region)};return P({region:n})})),Object(Se.a)((function(e){return Object(Le.a)(w({error:e}))})))})))})),this.redirectAddUpdateRegion$=Object(Me.c)((function(){return r.actions$.pipe(Object(Me.d)(C,P),Object(je.a)((function(){r.router.navigate(["regions"])})))}),{dispatch:!1}),this.deleteRegion$=Object(Me.c)((function(){return r.actions$.pipe(Object(Me.d)(m),Object(Fe.a)((function(e){return r.regionService.deleteRegion(e.id).pipe(Object(je.a)((function(e){return console.log(e),r.toaster.success("Region Successfully Deleted"),f()})),Object(Se.a)((function(e){return console.log("effect delete error",e),Object(Le.a)(h({error:e}))})))})))}))}).\u0275fac=function(e){return new(e||_e)(Z.ec(Me.a),Z.ec(l.h),Z.ec(R.b),Z.ec(o.d),Z.ec(o.a),Z.ec(J))},_e.\u0275prov=Z.Rb({token:_e,factory:_e.\u0275fac}),_e),Ae=n("vTDv"),Be=((ke=function e(){_classCallCheck(this,e)}).\u0275mod=Z.Tb({type:ke}),ke.\u0275inj=Z.Sb({factory:function(e){return new(e||ke)},imports:[[Ae.a,xe,l.j.forFeature("regions",G),Me.b.forFeature([De])]]}),ke)}}]);