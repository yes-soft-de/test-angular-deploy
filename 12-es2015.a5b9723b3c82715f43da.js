(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{HR9E:function(e,t,n){"use strict";n.r(t),n.d(t,"RegionsModule",(function(){return Le}));var i=n("tyNb"),o=n("ofXK"),c=n("3Pt+"),a=n("LC35"),r=n("kt0X");const s=Object(r.n)("[Region/API] Load Regions"),l=Object(r.n)("[Region/API] Load Regions Success",Object(r.s)()),g=Object(r.n)("[Region/API] Load Regions Failure",Object(r.s)()),d=Object(r.n)("[Region/API] Load Region",Object(r.s)()),u=Object(r.n)("[Region/API] Load Region Success",Object(r.s)()),b=Object(r.n)("[Region/API] Load Region Failure",Object(r.s)()),p=Object(r.n)("[Region/API] Delete Region",Object(r.s)()),m=Object(r.n)("[Region/API] Delete Region Success"),h=Object(r.n)("[Region/API] Delete Region Failure",Object(r.s)()),f=Object(r.n)("[Region/API] Add Region",Object(r.s)()),v=Object(r.n)("[Region/API] Add Region Success"),C=Object(r.n)("[Region/API] Add Region Failure",Object(r.s)()),O=Object(r.n)("[Region/API] Update Region",Object(r.s)()),P=Object(r.n)("[Region/API] Update Region Success",Object(r.s)()),Z=Object(r.n)("[Region/API] Update Region Failure",Object(r.s)());var w=n("fXoL"),R=n("5eHb"),x=n("Kj3r"),y=n("/uUt"),I=n("eIep"),M=n("EWl0"),J=n("tk/3"),L=n("lf8/");let _=(()=>{class e{constructor(e,t){this.httpClient=e,this.tokenService=t}getAllRegions(){return this.httpClient.get(M.a.regionsAPI)}getRegion(e){return this.httpClient.get(`${M.a.regionAPI}/${e}`)}createRegion(e){return this.httpClient.post(M.a.regionAPI,JSON.stringify(e))}updateRegion(e){return this.httpClient.put(M.a.updateRegionAPI,JSON.stringify(e))}deleteRegion(e){return this.httpClient.delete(`${M.a.regionAPI}/${e}`)}getGoogleMapToken(){return this.httpClient.get(M.a.googleMapTokenAPI)}getPlaceDetailsByPlaceID(e,t){return this.httpClient.get(M.a.googleMapPlaceDetailsAPI+`json?place_id=${e}&key=${t}`)}search(e,t){return this.httpClient.get(M.a.googleMapSearchAPI+`json?input=${e}&types=geocode&key=${t}`)}searchLocationAutoComplete(e,t){return e.pipe(Object(x.a)(500),Object(y.a)(),Object(I.a)(e=>e?this.search(e,t):[]))}uploadImage(e){const t=new FormData;return t.append("image",e),this.httpClient.post(M.a.generalUploadAPI,t)}}return e.\u0275fac=function(t){return new(t||e)(w.ec(J.b),w.ec(L.a))},e.\u0275prov=w.Rb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var F=n("sYmb");const j=["search"];function S(e,t){if(1&e){const e=w.bc();w.ac(0,"li",32),w.ic("click",(function(){w.wc(e);const n=t.$implicit;return w.lc(3).getLocationInfo(n)})),w.Cc(1),w.Zb()}if(2&e){const e=t.$implicit;w.Jb(1),w.Dc(null==e?null:e.description)}}function D(e,t){if(1&e&&(w.ac(0,"ul",30),w.Bc(1,S,2,1,"li",31),w.Zb()),2&e){const e=w.lc(2);w.Jb(1),w.pc("ngForOf",e.googleLocationsNameList)}}function k(e,t){1&e&&(w.ac(0,"div",33),w.Wb(1,"div"),w.Wb(2,"div"),w.Wb(3,"div"),w.Wb(4,"div"),w.Zb())}function A(e,t){if(1&e&&(w.ac(0,"div",27),w.Bc(1,D,2,1,"ul",28),w.Bc(2,k,5,0,"div",29),w.Zb()),2&e){const e=w.lc();w.Jb(1),w.pc("ngIf",e.googleLocationsNameList),w.Jb(1),w.pc("ngIf",!e.googleLocationsNameList)}}function B(e,t){1&e&&(w.ac(0,"span",34),w.Cc(1),w.mc(2,"translate"),w.Zb()),2&e&&(w.Jb(1),w.Dc(w.nc(2,1,"name-field-required")))}function q(e,t){1&e&&(w.ac(0,"span",34),w.Cc(1),w.mc(2,"translate"),w.Zb()),2&e&&(w.Jb(1),w.Dc(w.nc(2,1,"descriptioon-field-required")))}const V=function(e){return{"is-invalid":e}};let U=(()=>{class e{constructor(e,t,n,i,o,c,a){this.store=e,this.toaster=t,this.regionService=n,this.translate=i,this.router=o,this.render=c,this.document=a,this.title="AGM project",this.isSubmited=!1,this.uploadButtonValue="upload",this.coverUploadButtonValue="upload",this.imageName="select-image",this.fileSelected=!1,this.fileUploaded=!1,this.imagePathReady=!1,this.imageUploaded=!1,this.submitButtonValue="Waiting Uploading Image",this.showSearchResult=!1,this.googlePlaceLocation=[]}ngOnInit(){this.router.events.subscribe(e=>{e instanceof i.c&&"/regions/add"==e.urlAfterRedirects&&this.checkCurrentLang()}),this.addRegionForm=new c.d({name:new c.b(""),description:new c.b(""),location:new c.b(""),placeId:new c.b("",c.o.required),path:new c.b("")}),this.checkLangChange(),this.getGoogleMapToken()}location(){this.googlePlaceLocation=[];const e=this.addRegionForm.get("description").value,t=setInterval(()=>{const n=this.document.getElementById("app_root"),i=n.getAttribute("placeid"),o=n.getAttribute("lan"),a=n.getAttribute("lat"),r=n.getAttribute("formattedAddress");i&&this.googlePlaceID!=i&&(this.showSearchResult=!1,this.googlePlaceID=i,this.googlePlaceLocation.push(o,a),this.addRegionForm=new c.d({name:new c.b(r),description:new c.b(e),location:new c.b(this.googlePlaceLocation),placeId:new c.b(this.googlePlaceID),path:new c.b("")}),console.log("from compoentns placeId : ",i,this.googlePlaceLocation),clearInterval(t))},100)}getGoogleMapToken(){this.regionService.getGoogleMapToken().subscribe(e=>this.googleMapToken=e.Data)}searchLocation(e){this.showSearchResult=!0,""==e.target.value&&(this.showSearchResult=!1)}getLocationInfo(e){var t,n;const i=this.addRegionForm.get("description").value;e&&(this.showSearchResult=!1,this.addRegionForm=new c.d({name:new c.b(null==e?void 0:e.description),description:new c.b(i),location:new c.b(null===(n=null===(t=null==e?void 0:e.structured_formatting)||void 0===t?void 0:t.main_text_matched_substrings)||void 0===n?void 0:n.length),placeId:new c.b(null==e?void 0:e.place_id),path:new c.b("")}))}updateName(e){const t=e.files[0];this.uploadButtonValue="Upload",this.imageName=t.name,this.fileSelected=!0}processFile(e){this.fileSelected=!1,this.imageUploaded=!0,this.uploadButtonValue="Uploading...",console.log("Processing File");const t=e.files[0],n=new FileReader;n.addEventListener("load",e=>{this.selectedFile=new a.a(e.target.result,t),this.regionService.uploadImage(this.selectedFile.file).subscribe(e=>{console.log(e),this.imageUrl=e,this.uploadButtonValue="uploaded",this.imagePathReady=!0,this.imageUploaded=!1,this.submitButtonValue="new-region"},e=>{this.uploadButtonValue="upload",this.fileSelected=!0,this.imageUploaded=!1,this.toaster.error("Network Error, Please Try After a Few Seconds"),console.log(e)})}),n.readAsDataURL(t)}checkCurrentLang(){let e=0;const t=setInterval(()=>{e++,"ar"==this.translate.currentLang?(this.render.removeClass(this.document.querySelector(".input-group-custom"),"input-group"),this.render.addClass(this.document.querySelector(".input-group-custom"),"input-group-ar")):(this.render.addClass(this.document.querySelector(".input-group-custom"),"input-group"),this.render.removeClass(this.document.querySelector(".input-group-custom"),"input-group-ar")),2==e&&clearInterval(t)},200)}checkLangChange(){this.translate.onLangChange.subscribe(e=>{"ar"==(null==e?void 0:e.lang)?(this.render.removeClass(this.document.querySelector(".input-group-custom"),"input-group"),this.render.addClass(this.document.querySelector(".input-group-custom"),"input-group-ar")):(this.render.addClass(this.document.querySelector(".input-group-custom"),"input-group"),this.render.removeClass(this.document.querySelector(".input-group-custom"),"input-group-ar"))})}onSubmit(){if(!this.addRegionForm.valid)return this.toaster.error("Error : Form Not Valid"),this.isSubmited=!1,!1;const e=this.addRegionForm.getRawValue();e.path=this.imageUrl,console.log(e),this.store.dispatch(f({region:e}))}ngOnDestroy(){localStorage.removeItem("place_id")}}return e.\u0275fac=function(t){return new(t||e)(w.Vb(r.h),w.Vb(R.b),w.Vb(_),w.Vb(F.d),w.Vb(i.d),w.Vb(w.K),w.Vb(o.e))},e.\u0275cmp=w.Pb({type:e,selectors:[["app-add-region"]],viewQuery:function(e,t){var n;1&e&&w.Ic(j,!0),2&e&&w.tc(n=w.jc())&&(t.searchElementRef=n.first)},decls:49,vars:42,consts:[[1,"container-fluid"],[1,"content-header"],[1,"text-center","my-5"],[1,"card","card-info"],[1,"card-header","bg-sidebar-item-button","text-white"],[1,"card-title","mb-0"],[3,"formGroup","ngSubmit"],[1,"card-body"],[1,"form-group"],["for","inputNameSuccess",1,"col-form-label"],["type","text","id","pac-input","name","name","formControlName","name","autocomplete","off",1,"form-control","controls",3,"ngClass","placeholder","change","keydown"],["class","location-search-result px-3 py-2",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["for","exampleInputdescription1"],["name","description","formControlName","description","id","exampleInputdescription1",1,"form-control",3,"ngClass","placeholder"],["for","exampleInputupload"],[1,"input-group","input-group-custom"],[1,"custom-file"],["type","file","accept","image/*","id","file-input",1,"custom-file-input",3,"change"],["imageInput",""],["for","file-input",1,"custom-file-label"],[1,"input-group-append"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"card-footer"],["type","submit",1,"btn","bg-sidebar-item-button","text-white",3,"disabled"],[1,"container"],["id","map"],[1,"location-search-result","px-3","py-2"],["class","list-unstyled mb-0",4,"ngIf"],["class","lds-ring",4,"ngIf"],[1,"list-unstyled","mb-0"],["class","pb-1",3,"click",4,"ngFor","ngForOf"],[1,"pb-1",3,"click"],[1,"lds-ring"],[1,"invalid-feedback"]],template:function(e,t){if(1&e){const e=w.bc();w.ac(0,"div",0),w.ac(1,"div",1),w.ac(2,"h1",2),w.Cc(3),w.mc(4,"translate"),w.Zb(),w.Zb(),w.ac(5,"div",3),w.ac(6,"div",4),w.ac(7,"h3",5),w.Cc(8),w.mc(9,"translate"),w.Zb(),w.Zb(),w.ac(10,"form",6),w.ic("ngSubmit",(function(){return t.onSubmit()})),w.ac(11,"div",7),w.ac(12,"div",8),w.ac(13,"label",9),w.Cc(14),w.mc(15,"translate"),w.Zb(),w.ac(16,"input",10),w.ic("change",(function(){return t.location()}))("keydown",(function(e){return t.searchLocation(e)})),w.mc(17,"translate"),w.Zb(),w.Bc(18,A,3,2,"div",11),w.Bc(19,B,3,3,"span",12),w.Zb(),w.ac(20,"div",8),w.ac(21,"label",13),w.Cc(22),w.mc(23,"translate"),w.Zb(),w.ac(24,"textarea",14),w.mc(25,"translate"),w.Cc(26,"                    "),w.Zb(),w.Bc(27,q,3,3,"span",12),w.Zb(),w.ac(28,"div",8),w.ac(29,"label",15),w.Cc(30),w.mc(31,"translate"),w.Zb(),w.ac(32,"div",16),w.ac(33,"div",17),w.ac(34,"input",18,19),w.ic("change",(function(){w.wc(e);const n=w.uc(35);return t.updateName(n)})),w.Zb(),w.ac(36,"label",20),w.Cc(37),w.mc(38,"translate"),w.Zb(),w.Zb(),w.ac(39,"div",21),w.ac(40,"button",22),w.ic("click",(function(){w.wc(e);const n=w.uc(35);return t.processFile(n)})),w.Cc(41),w.mc(42,"translate"),w.Zb(),w.Zb(),w.Zb(),w.Zb(),w.Zb(),w.ac(43,"div",23),w.ac(44,"button",24),w.Cc(45),w.mc(46,"translate"),w.Zb(),w.Zb(),w.Zb(),w.Zb(),w.Zb(),w.ac(47,"div",25),w.Wb(48,"div",26),w.Zb()}2&e&&(w.Jb(3),w.Dc(w.nc(4,18,"create-region-page")),w.Jb(5),w.Dc(w.nc(9,20,"new-region")),w.Jb(2),w.pc("formGroup",t.addRegionForm),w.Jb(4),w.Dc(w.nc(15,22,"name")),w.Jb(2),w.qc("placeholder",w.nc(17,24,"name-type-placeholder")),w.pc("ngClass",w.sc(38,V,t.addRegionForm.get("name").errors&&(t.addRegionForm.get("name").touched||t.addRegionForm.get("name").dirty))),w.Jb(2),w.pc("ngIf",t.showSearchResult),w.Jb(1),w.pc("ngIf",null==t.addRegionForm.get("name").errors?null:t.addRegionForm.get("name").errors.required),w.Jb(3),w.Dc(w.nc(23,26,"description")),w.Jb(2),w.qc("placeholder",w.nc(25,28,"description-type-placeholder")),w.pc("ngClass",w.sc(40,V,t.addRegionForm.get("description").errors&&(t.addRegionForm.get("description").touched||t.addRegionForm.get("description").dirty))),w.Jb(3),w.pc("ngIf",null==t.addRegionForm.get("description").errors?null:t.addRegionForm.get("description").errors.required),w.Jb(3),w.Dc(w.nc(31,30,"upload")),w.Jb(7),w.Dc(w.nc(38,32,t.imageName)),w.Jb(3),w.pc("disabled",!t.fileSelected),w.Jb(1),w.Ec(" ",w.nc(42,34,t.uploadButtonValue)," "),w.Jb(3),w.pc("disabled",t.addRegionForm.invalid||t.imageUploaded),w.Jb(1),w.Dc(w.nc(46,36,"create")))},directives:[c.q,c.h,c.e,c.a,c.g,c.c,o.l,o.n,o.m],pipes:[F.c],styles:['.location-search-result[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:5px}.location-search-result[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}.location-search-result[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{transition:all .5s ease;background:rgba(54,72,94,.92);color:#fff;border-radius:5px;padding-left:10px}.location-search-result[_ngcontent-%COMP%]   .lds-ring[_ngcontent-%COMP%]{display:block;position:inherit;width:64px;height:64px;margin-left:auto;margin-right:auto}.card-footer[_ngcontent-%COMP%]   .btn.bg-sidebar-item-button[_ngcontent-%COMP%]:hover{background:rgba(54,72,94,.8)}.input-group-ar[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]{position:relative;flex:1 1 auto;width:1%;margin-bottom:0}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]   .custom-file-input[_ngcontent-%COMP%]{width:100%;min-width:14rem;max-width:100%;height:calc(2.25rem + 2px);margin:0;opacity:0}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]   .custom-file-label[_ngcontent-%COMP%]{position:absolute;top:0;right:0;left:0;z-index:1;height:calc(2.25rem + 2px);padding:.375rem .75rem;line-height:1.5;color:#495057;background-color:#fff;border:1px solid #ced4da;border-radius:.25rem}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]   .custom-file-label[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;bottom:0;z-index:3;display:block;height:2.25rem;padding:.375rem .75rem;line-height:1.5;color:#495057;content:"Browse";background-color:#e9ecef;border-left:1px solid #ced4da;border-radius:.25rem 0 0 .25rem}#map[_ngcontent-%COMP%], body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0}#description[_ngcontent-%COMP%]{font-family:Roboto;font-size:15px;font-weight:300}#infowindow-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700}#infowindow-content[_ngcontent-%COMP%]{display:none}#map[_ngcontent-%COMP%]   #infowindow-content[_ngcontent-%COMP%]{display:inline}.pac-card[_ngcontent-%COMP%]{margin:10px 10px 0 0;border-radius:2px 0 0 2px;box-sizing:border-box;-moz-box-sizing:border-box;outline:none;box-shadow:0 2px 6px rgba(0,0,0,.3);background-color:#fff;font-family:Roboto}#pac-container[_ngcontent-%COMP%]{padding-bottom:12px;margin-right:12px}.pac-controls[_ngcontent-%COMP%]{display:inline-block;padding:5px 11px}.pac-controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Roboto;font-size:13px;font-weight:300}#pac-input[_ngcontent-%COMP%]:focus{border-color:#4d90fe}#title[_ngcontent-%COMP%]{color:#fff;background-color:#4d90fe;font-size:25px;font-weight:500;padding:6px 12px}#target[_ngcontent-%COMP%]{width:345px}']}),e})();var N=n("R0sL");const W=Object(N.a)(),$=W.getInitialState({Data:void 0,regionDetails:void 0,error:void 0}),E=Object(r.p)($,Object(r.r)(l,(e,t)=>W.setAll(t.Data,e)),Object(r.r)(u,(e,t)=>Object.assign(Object.assign({},e),{regionDetails:t.region})),Object(r.r)(p,(e,t)=>W.removeOne(t.id,e)),Object(r.r)(f,(e,t)=>W.addOne(t.region,e)),Object(r.r)(P,(e,t)=>W.updateOne(t.region,e))),{selectAll:G}=W.getSelectors(),T=Object(r.o)("regions"),z=Object(r.q)(T,G),H=Object(r.q)(T,e=>e.regionDetails);var K=n("oOf3");function X(e,t){if(1&e){const e=w.bc();w.ac(0,"tr"),w.ac(1,"td"),w.Wb(2,"img",11),w.Zb(),w.ac(3,"td"),w.Cc(4),w.Zb(),w.ac(5,"td",12),w.Cc(6),w.Zb(),w.ac(7,"td"),w.Cc(8),w.Zb(),w.ac(9,"td"),w.Cc(10),w.Zb(),w.ac(11,"td"),w.ac(12,"a",13),w.Cc(13),w.mc(14,"translate"),w.Zb(),w.ac(15,"a",14),w.ic("click",(function(){w.wc(e);const n=t.$implicit;return w.lc(2).delete(null==n?null:n.id)})),w.Cc(16),w.mc(17,"translate"),w.Zb(),w.ac(18,"a",15),w.Cc(19),w.mc(20,"translate"),w.Zb(),w.Zb(),w.Zb()}if(2&e){const e=t.$implicit,n=w.lc(2);w.Jb(2),w.qc("src",null==e||null==e.path[0]?null:e.path[0].path,w.yc),w.rc("alt","",e.name," Image"),w.Jb(2),w.Dc(e.name?e.name:"-"),w.Jb(2),w.Dc(e.description?e.description:"-"),w.Jb(2),w.Dc(e.commentNumber?e.commentNumber:"-"),w.Jb(2),w.Dc(e.ratingAverage?e.ratingAverage:"-"),w.Jb(2),w.rc("routerLink","/regions/edit/",null==e?null:e.id,""),w.Jb(1),w.Ec(" ",w.nc(14,14,"update")," "),w.Jb(2),w.Mb("btn btn-danger confirm btn-sm mr-1 mb-1 ",n.isDeleted?"disabled":"",""),w.Jb(1),w.Ec(" ",w.nc(17,16,"delete")," "),w.Jb(2),w.rc("routerLink","/regions/",null==e?null:e.id,""),w.Jb(1),w.Ec(" ",w.nc(20,18,"view")," ")}}function Y(e,t){if(1&e){const e=w.bc();w.ac(0,"div"),w.ac(1,"h1",1),w.Cc(2),w.mc(3,"translate"),w.Zb(),w.ac(4,"div",2),w.ac(5,"div",3),w.ac(6,"div",4),w.ac(7,"input",5),w.ic("ngModelChange",(function(t){return w.wc(e),w.lc().name=t}))("keyup",(function(){return w.wc(e),w.lc().applyFilter()})),w.mc(8,"translate"),w.mc(9,"translate"),w.Zb(),w.Zb(),w.Zb(),w.Zb(),w.ac(10,"div",6),w.ac(11,"table",7),w.ac(12,"tr",8),w.ac(13,"td"),w.Cc(14),w.mc(15,"translate"),w.Zb(),w.ac(16,"td"),w.Cc(17),w.mc(18,"translate"),w.Zb(),w.ac(19,"td"),w.Cc(20),w.mc(21,"translate"),w.Zb(),w.ac(22,"td"),w.Cc(23),w.mc(24,"translate"),w.Zb(),w.ac(25,"td"),w.Cc(26),w.mc(27,"translate"),w.Zb(),w.ac(28,"td"),w.Cc(29),w.mc(30,"translate"),w.Zb(),w.Zb(),w.Bc(31,X,21,20,"tr",9),w.mc(32,"paginate"),w.Zb(),w.ac(33,"pagination-controls",10),w.ic("pageChange",(function(t){return w.wc(e),w.lc().pageChanged(t)})),w.mc(34,"translate"),w.mc(35,"translate"),w.mc(36,"translate"),w.Zb(),w.Zb(),w.Zb()}if(2&e){const e=w.lc();w.Jb(2),w.Dc(w.nc(3,14,"manage-regions-page")),w.Jb(5),w.qc("placeholder",w.nc(8,16,"region-search-input")),w.qc("title",w.nc(9,18,"region-search-input")),w.pc("ngModel",e.name),w.Jb(7),w.Dc(w.nc(15,20,"image")),w.Jb(3),w.Dc(w.nc(18,22,"name")),w.Jb(3),w.Dc(w.nc(21,24,"description")),w.Jb(3),w.Dc(w.nc(24,26,"comment-number")),w.Jb(3),w.Dc(w.nc(27,28,"rating-average")),w.Jb(3),w.Dc(w.nc(30,30,"control")),w.Jb(2),w.pc("ngForOf",w.oc(32,32,e.regionsList,e.config)),w.Jb(2),w.qc("previousLabel",w.nc(34,35,"prev")),w.qc("nextLabel",w.nc(35,37,"next")),w.qc("screenReaderCurrentLabel",w.nc(36,39,"you-are-on-page"))}}function Q(e,t){1&e&&(w.ac(0,"div"),w.ac(1,"div",16),w.Wb(2,"div"),w.Wb(3,"div"),w.Wb(4,"div"),w.Wb(5,"div"),w.Zb(),w.Zb())}let ee=(()=>{class e{constructor(e){this.store=e,this.regionsList=[]}ngOnInit(){this.store.dispatch(s()),this.getAllRegions()}getAllRegions(){this.regionsSubscription=this.store.select(z).subscribe(e=>{console.log(e),this.regions=e,this.regionsList=e}),this.config={itemsPerPage:5,currentPage:1,totalItems:this.regionsList.length}}pageChanged(e){this.config.currentPage=e}delete(e){if(!confirm("Are You Sure You Want To Delete This Region"))return!1;this.isDeleted=!0,this.store.dispatch(p({id:e})),setTimeout(()=>{this.isDeleted=!1},1e3)}applyFilter(){this.name?(this.regionsList=[],this.regionsList=this.regions.filter(e=>{if(e.name){const t=e.name.toLocaleLowerCase().match(this.name.toLocaleLowerCase());if(t)return t}})):this.regionsList=[...this.regions]}ngOnDestroy(){this.regionsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(w.Vb(r.h))},e.\u0275cmp=w.Pb({type:e,selectors:[["app-all-regions"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"text-center","details-title","my-4"],[1,"row"],[1,"col-10","col-sm-8","col-md-6","col-xl-4"],[1,"form-group","mb-4"],["id","exampleFormControlInput2","type","text",1,"form-control","form-control-underlined","border-primary","search-input",3,"ngModel","placeholder","title","ngModelChange","keyup"],[1,"table-responsive","text-center"],[1,"table","table-bordered","main-table"],[1,"bg-dark","text-white"],[4,"ngFor","ngForOf"],["autoHide","true","maxSize","5","responsive","true","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page",1,"my-pagination",3,"previousLabel","nextLabel","screenReaderCurrentLabel","pageChange"],[1,"img-thumbnail","img-custom",3,"src","alt"],[1,"td-custom"],[1,"btn","btn-success","btn-sm","mr-1","mb-1",3,"routerLink"],[3,"click"],[1,"btn","bg-light-blue","text-white","btn-sm","mr-1","mb-1",3,"routerLink"],[1,"lds-ring"]],template:function(e,t){1&e&&(w.Bc(0,Y,37,41,"div",0),w.Bc(1,Q,6,0,"div",0)),2&e&&(w.pc("ngIf",0!=t.regions.length),w.Jb(1),w.pc("ngIf",0==t.regions.length))},directives:[o.n,c.a,c.g,c.j,o.m,K.c,i.f],pipes:[F.c,K.b],styles:["agm-map[_ngcontent-%COMP%]{height:300px}"]}),e})();function te(e,t){if(1&e){const e=w.bc();w.ac(0,"li",32),w.ic("click",(function(){w.wc(e);const n=t.$implicit;return w.lc(3).getLocationInfo(n)})),w.Cc(1),w.Zb()}if(2&e){const e=t.$implicit;w.Jb(1),w.Dc(null==e?null:e.description)}}function ne(e,t){if(1&e&&(w.ac(0,"ul",30),w.Bc(1,te,2,1,"li",31),w.Zb()),2&e){const e=w.lc(2);w.Jb(1),w.pc("ngForOf",e.googleLocationsNameList)}}function ie(e,t){1&e&&(w.ac(0,"div",33),w.Wb(1,"div"),w.Wb(2,"div"),w.Wb(3,"div"),w.Wb(4,"div"),w.Zb())}function oe(e,t){if(1&e&&(w.ac(0,"div",27),w.Bc(1,ne,2,1,"ul",28),w.Bc(2,ie,5,0,"div",29),w.Zb()),2&e){const e=w.lc();w.Jb(1),w.pc("ngIf",e.googleLocationsNameList),w.Jb(1),w.pc("ngIf",!e.googleLocationsNameList)}}function ce(e,t){1&e&&(w.ac(0,"span",34),w.Cc(1),w.mc(2,"translate"),w.Zb()),2&e&&(w.Jb(1),w.Dc(w.nc(2,1,"name-field-required")))}function ae(e,t){1&e&&(w.ac(0,"span",34),w.Cc(1),w.mc(2,"translate"),w.Zb()),2&e&&(w.Jb(1),w.Dc(w.nc(2,1,"descriptioon-field-required")))}function re(e,t){1&e&&(w.ac(0,"span",34),w.Cc(1,"description Must Be Greater Than 3"),w.Zb())}const se=function(e){return{"is-invalid":e}};let le=(()=>{class e{constructor(e,t,n,i,o,c,a){this.store=e,this.regionService=t,this.toaster=n,this.translate=i,this.render=o,this.document=c,this.activatedRoute=a,this.isSubmited=!1,this.uploadButtonValue="upload",this.coverUploadButtonValue="upload",this.imageName="select-image",this.fileSelected=!1,this.fileUploaded=!1,this.imagePathReady=!1,this.imageUploaded=!1,this.submitButtonValue="Waiting Uploading Image",this.showSearchResult=!1,this.googlePlaceLocation=[]}ngOnInit(){this.activatedRoute.paramMap.subscribe(e=>{const t=e.get("id");this.store.dispatch(d({id:+t}))}),this.editRegionForm=new c.d({name:new c.b(""),description:new c.b(""),location:new c.b(""),path:new c.b(""),placeId:new c.b("",c.o.required)}),this.checkLangChange(),this.getRegion(),this.getGoogleMapToken()}getGoogleMapToken(){this.regionService.getGoogleMapToken().subscribe(e=>this.googleMapToken=e.Data)}getRegion(){this.store.select(H).subscribe(e=>{e&&(this.regionData=e,console.log("data detail: ",e),this.fillForms(e))})}location(){this.googlePlaceLocation=[];const e=this.editRegionForm.get("description").value,t=setInterval(()=>{const n=this.document.getElementById("app_root"),i=n.getAttribute("placeid"),o=n.getAttribute("lan"),a=n.getAttribute("lat"),r=n.getAttribute("formattedAddress");i&&this.googlePlaceID!=i&&(this.showSearchResult=!1,this.googlePlaceID=i,this.googlePlaceLocation.push(o,a),this.editRegionForm=new c.d({name:new c.b(r),description:new c.b(e),location:new c.b(this.googlePlaceLocation),placeId:new c.b(this.googlePlaceID),path:new c.b("")}),console.log("from compoentns placeId : ",i,this.googlePlaceLocation),clearInterval(t))},100)}fillForms(e){this.editRegionForm=new c.d({id:new c.b(e.id),name:new c.b(e.name),description:new c.b(e.description),location:new c.b(e.location),path:new c.b(e.path),placeId:new c.b(e.placeId)})}searchLocation(e){this.showSearchResult=!0,""==e.target.value&&(this.showSearchResult=!1)}getLocationInfo(e){var t;const n=this.regionData.id,i=this.editRegionForm.get("description").value;e&&(this.showSearchResult=!1,this.editRegionForm=new c.d({id:new c.b(n),name:new c.b(null==e?void 0:e.description),description:new c.b(i),location:new c.b(null===(t=null==e?void 0:e.structured_formatting)||void 0===t?void 0:t.main_text_matched_substrings.length),placeId:new c.b(null==e?void 0:e.place_id),path:new c.b("")}))}checkLangChange(){this.translate.onLangChange.subscribe(e=>{console.log("lang change to : ",e),"ar"==e.lang?(console.log("lang : ",e.lang),this.render.removeClass(this.document.querySelector(".input-group-custom"),"input-group"),this.render.addClass(this.document.querySelector(".input-group-custom"),"input-group-ar")):(this.render.addClass(this.document.querySelector(".input-group-custom"),"input-group"),this.render.removeClass(this.document.querySelector(".input-group-custom"),"input-group-ar"))})}updateName(e){const t=e.files[0];this.uploadButtonValue="Upload",this.imageName=t.name,this.fileSelected=!0}processFile(e){this.fileSelected=!1,this.uploadButtonValue="Uploading...",this.imageUploaded=!0,console.log("Processing File");const t=e.files[0],n=new FileReader;n.addEventListener("load",e=>{this.selectedFile=new a.a(e.target.result,t),this.regionService.uploadImage(this.selectedFile.file).subscribe(e=>{console.log(e),this.imageUrl=e,this.uploadButtonValue="uploaded",this.imagePathReady=!0,this.imageUploaded=!1,this.submitButtonValue="update"},e=>{this.uploadButtonValue="upload",this.fileSelected=!0,this.imageUploaded=!1,this.toaster.error("Network Error, Please Try After a Few Seconds"),console.log(e)})}),n.readAsDataURL(t)}onSubmit(){if(!this.editRegionForm.valid)return this.toaster.error("Error : Form Not Valid"),this.isSubmited=!1,!1;const e=this.editRegionForm.getRawValue();e.path=this.imageUrl,e.path=this.imageUrl?this.imageUrl:this.regionData.regionImage[0].pathURL,console.log(e),this.store.dispatch(O({region:e}))}}return e.\u0275fac=function(t){return new(t||e)(w.Vb(r.h),w.Vb(_),w.Vb(R.b),w.Vb(F.d),w.Vb(w.K),w.Vb(o.e),w.Vb(i.a))},e.\u0275cmp=w.Pb({type:e,selectors:[["app-edit-region"]],decls:50,vars:43,consts:[[1,"container-fluid"],[1,"content-header"],[1,"text-center","my-5"],[1,"card","card-info"],[1,"card-header","bg-sidebar-item-button","text-white"],[1,"card-title","mb-0"],[3,"formGroup","ngSubmit"],[1,"card-body"],[1,"form-group"],["for","inputNameSuccess",1,"col-form-label"],["type","text","id","pac-input","name","name","formControlName","name","autocomplete","off",1,"form-control","controls",3,"ngClass","placeholder","change","keydown"],["class","location-search-result px-3 py-2",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["for","exampleInputdescription1"],["name","description","formControlName","description","id","exampleInputdescription1",1,"form-control",3,"ngClass","placeholder"],["for","exampleInputupload"],[1,"input-group","input-group-custom"],[1,"custom-file"],["type","file","accept","image/*","id","file-input",1,"custom-file-input",3,"change"],["imageInput",""],["for","file-input",1,"custom-file-label"],[1,"input-group-append"],["type","button",1,"btn","btn-success",3,"disabled","click"],[1,"card-footer"],["type","submit",1,"btn","bg-sidebar-item-button","text-white",3,"disabled"],[1,"container"],["id","map"],[1,"location-search-result","px-3","py-2"],["class","list-unstyled mb-0",4,"ngIf"],["class","lds-ring",4,"ngIf"],[1,"list-unstyled","mb-0"],["class","pb-1",3,"click",4,"ngFor","ngForOf"],[1,"pb-1",3,"click"],[1,"lds-ring"],[1,"invalid-feedback"]],template:function(e,t){if(1&e){const e=w.bc();w.ac(0,"div",0),w.ac(1,"div",1),w.ac(2,"h1",2),w.Cc(3),w.mc(4,"translate"),w.Zb(),w.Zb(),w.ac(5,"div",3),w.ac(6,"div",4),w.ac(7,"h3",5),w.Cc(8),w.mc(9,"translate"),w.Zb(),w.Zb(),w.ac(10,"form",6),w.ic("ngSubmit",(function(){return t.onSubmit()})),w.ac(11,"div",7),w.ac(12,"div",8),w.ac(13,"label",9),w.Cc(14),w.mc(15,"translate"),w.Zb(),w.ac(16,"input",10),w.ic("change",(function(){return t.location()}))("keydown",(function(e){return t.searchLocation(e)})),w.mc(17,"translate"),w.Zb(),w.Bc(18,oe,3,2,"div",11),w.Bc(19,ce,3,3,"span",12),w.Zb(),w.ac(20,"div",8),w.ac(21,"label",13),w.Cc(22),w.mc(23,"translate"),w.Zb(),w.ac(24,"textarea",14),w.mc(25,"translate"),w.Cc(26,"                    "),w.Zb(),w.Bc(27,ae,3,3,"span",12),w.Bc(28,re,2,0,"span",12),w.Zb(),w.ac(29,"div",8),w.ac(30,"label",15),w.Cc(31),w.mc(32,"translate"),w.Zb(),w.ac(33,"div",16),w.ac(34,"div",17),w.ac(35,"input",18,19),w.ic("change",(function(){w.wc(e);const n=w.uc(36);return t.updateName(n)})),w.Zb(),w.ac(37,"label",20),w.Cc(38),w.mc(39,"translate"),w.Zb(),w.Zb(),w.ac(40,"div",21),w.ac(41,"button",22),w.ic("click",(function(){w.wc(e);const n=w.uc(36);return t.processFile(n)})),w.Cc(42),w.mc(43,"translate"),w.Zb(),w.Zb(),w.Zb(),w.Zb(),w.Zb(),w.ac(44,"div",23),w.ac(45,"button",24),w.Cc(46),w.mc(47,"translate"),w.Zb(),w.Zb(),w.Zb(),w.Zb(),w.Zb(),w.ac(48,"div",25),w.Wb(49,"div",26),w.Zb()}2&e&&(w.Jb(3),w.Dc(w.nc(4,19,"update-region-page")),w.Jb(5),w.Dc(w.nc(9,21,"update-region")),w.Jb(2),w.pc("formGroup",t.editRegionForm),w.Jb(4),w.Dc(w.nc(15,23,"name")),w.Jb(2),w.qc("placeholder",w.nc(17,25,"name-type-placeholder")),w.pc("ngClass",w.sc(39,se,t.editRegionForm.get("name").errors&&(t.editRegionForm.get("name").touched||t.editRegionForm.get("name").dirty))),w.Jb(2),w.pc("ngIf",t.showSearchResult),w.Jb(1),w.pc("ngIf",null==t.editRegionForm.get("name").errors?null:t.editRegionForm.get("name").errors.required),w.Jb(3),w.Dc(w.nc(23,27,"description")),w.Jb(2),w.qc("placeholder",w.nc(25,29,"description-type-placeholder")),w.pc("ngClass",w.sc(41,se,t.editRegionForm.get("description").errors&&(t.editRegionForm.get("description").touched||t.editRegionForm.get("description").dirty))),w.Jb(3),w.pc("ngIf",null==t.editRegionForm.get("description").errors?null:t.editRegionForm.get("description").errors.required),w.Jb(1),w.pc("ngIf",null==t.editRegionForm.get("description").errors?null:t.editRegionForm.get("description").errors.minlength),w.Jb(3),w.Dc(w.nc(32,31,"upload")),w.Jb(7),w.Dc(w.nc(39,33,t.imageName)),w.Jb(3),w.pc("disabled",!t.fileSelected),w.Jb(1),w.Ec(" ",w.nc(43,35,t.uploadButtonValue)," "),w.Jb(3),w.pc("disabled",t.editRegionForm.invalid||t.imageUploaded),w.Jb(1),w.Dc(w.nc(47,37,"update")))},directives:[c.q,c.h,c.e,c.a,c.g,c.c,o.l,o.n,o.m],pipes:[F.c],styles:['.location-search-result[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:5px}.location-search-result[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}.location-search-result[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{transition:all .5s ease;background:rgba(54,72,94,.92);color:#fff;border-radius:5px;padding-left:10px}.location-search-result[_ngcontent-%COMP%]   .lds-ring[_ngcontent-%COMP%]{display:block;position:inherit;width:64px;height:64px;margin-left:auto;margin-right:auto}.card-footer[_ngcontent-%COMP%]   .btn.bg-sidebar-item-button[_ngcontent-%COMP%]:hover{background:rgba(54,72,94,.8)}.input-group-ar[_ngcontent-%COMP%]{position:relative;display:flex;flex-wrap:wrap;align-items:stretch;width:100%}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]{position:relative;flex:1 1 auto;width:1%;margin-bottom:0}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]   .custom-file-input[_ngcontent-%COMP%]{width:100%;min-width:14rem;max-width:100%;height:calc(2.25rem + 2px);margin:0;opacity:0}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]   .custom-file-label[_ngcontent-%COMP%]{position:absolute;top:0;right:0;left:0;z-index:1;height:calc(2.25rem + 2px);padding:.375rem .75rem;line-height:1.5;color:#495057;background-color:#fff;border:1px solid #ced4da;border-radius:.25rem}.input-group-ar[_ngcontent-%COMP%] > .custom-file[_ngcontent-%COMP%]   .custom-file-label[_ngcontent-%COMP%]:after{position:absolute;top:0;left:0;bottom:0;z-index:3;display:block;height:2.25rem;padding:.375rem .75rem;line-height:1.5;color:#495057;content:"Browse";background-color:#e9ecef;border-left:1px solid #ced4da;border-radius:.25rem 0 0 .25rem}']}),e})();function ge(e,t){if(1&e&&(w.ac(0,"li",26),w.ac(1,"p",27),w.Cc(2),w.mc(3,"translate"),w.ac(4,"span",28),w.Cc(5),w.Zb(),w.Zb(),w.Zb()),2&e){const e=w.lc(2);w.Jb(2),w.Ec("",w.nc(3,2,"rating")," : "),w.Jb(3),w.Dc(null==e.region?null:e.region.ratingAverage)}}function de(e,t){if(1&e&&(w.ac(0,"li",26),w.ac(1,"p"),w.ac(2,"b"),w.Cc(3),w.mc(4,"translate"),w.Zb(),w.Wb(5,"br"),w.ac(6,"span",29),w.Cc(7),w.Zb(),w.Zb(),w.Zb()),2&e){const e=w.lc(2);w.Jb(3),w.Ec("",w.nc(4,2,"description")," :"),w.Jb(4),w.Dc(null==e.region?null:e.region.description)}}function ue(e,t){1&e&&(w.ac(0,"div",15),w.ac(1,"h3",30),w.Cc(2),w.mc(3,"translate"),w.Zb(),w.Zb()),2&e&&(w.Jb(2),w.Ec("",w.nc(3,1,"guides")," :"))}function be(e,t){if(1&e&&(w.ac(0,"span",39),w.Cc(1),w.Zb()),2&e){const e=t.$implicit;w.Jb(1),w.Dc(e)}}function pe(e,t){if(1&e&&(w.ac(0,"tr"),w.ac(1,"td"),w.Wb(2,"img",37),w.Zb(),w.ac(3,"td"),w.Cc(4),w.Zb(),w.ac(5,"td"),w.Cc(6),w.Bc(7,be,2,1,"span",38),w.Zb(),w.ac(8,"td"),w.Cc(9),w.Zb(),w.ac(10,"td"),w.Cc(11),w.mc(12,"translate"),w.Zb(),w.Zb()),2&e){const e=t.$implicit;w.Jb(2),w.qc("src",null==e?null:e.image,w.yc),w.rc("alt","",null==e?null:e.name," Image"),w.Jb(2),w.Dc(e.name?null==e?null:e.name:"-"),w.Jb(2),w.Ec(" ",0==(null==e||null==e.language?null:e.language.length)?"-":null," "),w.Jb(1),w.pc("ngForOf",null==e?null:e.language),w.Jb(2),w.Dc(null!=e&&e.rating?null==e?null:e.rating:"-"),w.Jb(2),w.Dc(null!=e&&e.status?w.nc(12,7,null==e?null:e.status):"-")}}function me(e,t){if(1&e){const e=w.bc();w.ac(0,"div",31),w.ac(1,"div",32),w.ac(2,"table",33),w.ac(3,"tr",34),w.ac(4,"td"),w.Cc(5),w.mc(6,"translate"),w.Zb(),w.ac(7,"td"),w.Cc(8),w.mc(9,"translate"),w.Zb(),w.ac(10,"td"),w.Cc(11),w.mc(12,"translate"),w.Zb(),w.ac(13,"td"),w.Cc(14),w.mc(15,"translate"),w.Zb(),w.ac(16,"td"),w.Cc(17),w.mc(18,"translate"),w.Zb(),w.Zb(),w.Bc(19,pe,13,9,"tr",35),w.mc(20,"paginate"),w.Zb(),w.ac(21,"pagination-controls",36),w.ic("pageChange",(function(t){return w.wc(e),w.lc(2).pageChanged(t)})),w.mc(22,"translate"),w.mc(23,"translate"),w.mc(24,"translate"),w.Zb(),w.Zb(),w.Zb()}if(2&e){const e=w.lc(2);w.Jb(5),w.Dc(w.nc(6,9,"image")),w.Jb(3),w.Dc(w.nc(9,11,"name")),w.Jb(3),w.Dc(w.nc(12,13,"language")),w.Jb(3),w.Dc(w.nc(15,15,"rating")),w.Jb(3),w.Dc(w.nc(18,17,"status")),w.Jb(2),w.pc("ngForOf",w.oc(20,19,e.regionGuidesList,e.config)),w.Jb(2),w.qc("previousLabel",w.nc(22,22,"prev")),w.qc("nextLabel",w.nc(23,24,"next")),w.qc("screenReaderCurrentLabel",w.nc(24,26,"you-are-on-page"))}}function he(e,t){1&e&&(w.ac(0,"div",15),w.ac(1,"h3",30),w.Cc(2),w.mc(3,"translate"),w.Zb(),w.Zb()),2&e&&(w.Jb(2),w.Ec("",w.nc(3,1,"comments")," :"))}function fe(e,t){if(1&e&&(w.ac(0,"div",40),w.ac(1,"div",5),w.ac(2,"div",41),w.ac(3,"div",42),w.Wb(4,"img",43),w.Zb(),w.Zb(),w.ac(5,"div",44),w.ac(6,"div",45),w.ac(7,"div",46),w.ac(8,"span",47),w.Cc(9),w.mc(10,"date"),w.Zb(),w.Zb(),w.ac(11,"p",48),w.Cc(12),w.Zb(),w.Zb(),w.Zb(),w.Zb(),w.Zb()),2&e){const e=t.$implicit;w.Jb(4),w.qc("src",null!=e&&e.userImage?null==e?null:e.userImage:"../../../../../assets/default-avatar.jpg",w.yc),w.Jb(5),w.Fc("",null==e?null:e.userName," ",null!=(null==e?null:e.date)?"( "+w.oc(10,4,1e3*(null==e?null:e.date.timestamp),"medium")+" )":"",""),w.Jb(3),w.Ec(" ",null==e?null:e.comment," ")}}function ve(e,t){if(1&e){const e=w.bc();w.ac(0,"div",2),w.ac(1,"div",3),w.ac(2,"h1",4),w.Cc(3),w.mc(4,"translate"),w.Zb(),w.ac(5,"div",5),w.ac(6,"div",6),w.ac(7,"div",7),w.Wb(8,"img",8),w.Zb(),w.Zb(),w.ac(9,"div",9),w.ac(10,"div",10),w.ac(11,"ul",11),w.ac(12,"li"),w.ac(13,"div",5),w.ac(14,"div",12),w.ac(15,"h4",13),w.Cc(16),w.Zb(),w.Zb(),w.Zb(),w.Zb(),w.Bc(17,ge,6,4,"li",14),w.Bc(18,de,8,4,"li",14),w.Zb(),w.Zb(),w.Zb(),w.ac(19,"div",15),w.Wb(20,"hr",16),w.Zb(),w.Bc(21,ue,4,3,"div",17),w.Bc(22,me,25,28,"div",18),w.ac(23,"div",15),w.Wb(24,"hr",16),w.Zb(),w.Bc(25,he,4,3,"div",17),w.ac(26,"div",19),w.Wb(27,"div",20),w.ac(28,"div",21),w.ac(29,"div",22),w.Bc(30,fe,13,7,"div",23),w.mc(31,"paginate"),w.Zb(),w.Zb(),w.ac(32,"div",24),w.ac(33,"pagination-controls",25),w.ic("pageChange",(function(t){return w.wc(e),w.lc().pagedChanged(t)})),w.mc(34,"translate"),w.mc(35,"translate"),w.mc(36,"translate"),w.Zb(),w.Zb(),w.Zb(),w.Zb(),w.Zb(),w.Zb()}if(2&e){const e=w.lc();w.Jb(3),w.Dc(w.nc(4,13,"region-details-page")),w.Jb(5),w.qc("src",null==e.region||null==e.region.regionImage[0]?null:e.region.regionImage[0].path,w.yc),w.rc("alt","",null==e.region?null:e.region.name," Image"),w.Jb(8),w.Dc(null==e.region?null:e.region.name),w.Jb(1),w.pc("ngIf",null==e.region?null:e.region.ratingAverage),w.Jb(1),w.pc("ngIf",null==e.region?null:e.region.description),w.Jb(3),w.pc("ngIf",e.regionGuidesList.length>0),w.Jb(1),w.pc("ngIf",e.regionGuidesList.length>0),w.Jb(3),w.pc("ngIf",e.regionCommentsList.length>0),w.Jb(5),w.pc("ngForOf",w.oc(31,15,e.regionCommentsList,e.paginate)),w.Jb(3),w.qc("previousLabel",w.nc(34,18,"prev")),w.qc("nextLabel",w.nc(35,20,"next")),w.qc("screenReaderCurrentLabel",w.nc(36,22,"you-are-on-page"))}}function Ce(e,t){1&e&&(w.ac(0,"div"),w.ac(1,"div",49),w.Wb(2,"div"),w.Wb(3,"div"),w.Wb(4,"div"),w.Wb(5,"div"),w.Zb(),w.Zb())}const Oe=[{path:"",component:ee},{path:"add",component:U},{path:":id",component:(()=>{class e{constructor(e,t){this.store=e,this.activatedRoute=t,this.regionGuidesList=[],this.regionCommentsList=[]}ngOnInit(){this.activatedRoute.paramMap.subscribe(e=>{this.store.dispatch(d({id:+e.get("id")}))}),this.getRegionDetails()}getRegionDetails(){this.store.select(H).subscribe(e=>{e&&(console.log("data: ",e),this.region=e,this.regionGuidesList=null==e?void 0:e.guides,this.regionCommentsList=null==e?void 0:e.comments,this.config={id:"region-guide",itemsPerPage:5,currentPage:1,totalItems:this.regionGuidesList.length},this.paginate={id:"region-comments",itemsPerPage:5,currentPage:1,totalItems:this.regionCommentsList.length})})}pageChanged(e){this.config.currentPage=e}pagedChanged(e){this.paginate.currentPage=e}}return e.\u0275fac=function(t){return new(t||e)(w.Vb(r.h),w.Vb(i.a))},e.\u0275cmp=w.Pb({type:e,selectors:[["app-regions-details"]],decls:2,vars:2,consts:[["class","region-details",4,"ngIf"],[4,"ngIf"],[1,"region-details"],[1,"container"],[1,"my-3","details-title"],[1,"row"],[1,"col-12","col-sm-5","col-md-4","position-relative","mx-auto","text-center","mb-3"],[1,"image-details","mb-3"],[1,"img-fluid","img-thumbnail",3,"src","alt"],[1,"col-12","col-sm-6","mx-auto"],[1,"info-details"],[1,"list-unstyled"],[1,"col"],[1,"text-info"],["class","mb-2",4,"ngIf"],[1,"col-12"],[1,"w-50","mx-auto"],["class","col-12",4,"ngIf"],["class","col-12 mx-auto",4,"ngIf"],[1,"card","col-12","px-0"],[1,"card-header"],[1,"card-body","p-2"],[1,"messages-body","my-3","pt-3","p-2"],["class","comment-block",4,"ngFor","ngForOf"],[1,"card-footer","text-center"],["id","region-comments","autoHide","true","maxSize","5","responsive","true","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page",3,"previousLabel","nextLabel","screenReaderCurrentLabel","pageChange"],[1,"mb-2"],[1,"mb-0"],[1,"text-secondary"],[1,"m-1","px-1"],[1,""],[1,"col-12","mx-auto"],[1,"table-responsive","text-center"],[1,"table","table-bordered","main-table"],[1,"bg-dark","text-white"],[4,"ngFor","ngForOf"],["id","region-guide","autoHide","true","maxSize","5","responsive","true","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page",3,"previousLabel","nextLabel","screenReaderCurrentLabel","pageChange"],[1,"img-thumbnail","img-custom",3,"src","alt"],["class","m-1 px-1 rounded bg-grey-blue text-white",4,"ngFor","ngForOf"],[1,"m-1","px-1","rounded","bg-grey-blue","text-white"],[1,"comment-block"],[1,"col-2","col-lg-1","text-center","pr-0","align-self-center"],[1,"user-img"],["alt","",1,"res-image",3,"src"],[1,"col-10","col-lg-11","mt-2","mt-sm-0"],[1,"comment-body","py-2","px-3"],[1,"time"],[1,"pb-1"],[1,"comment","m-0"],[1,"lds-ring"]],template:function(e,t){1&e&&(w.Bc(0,ve,37,24,"div",0),w.Bc(1,Ce,6,0,"div",1)),2&e&&(w.pc("ngIf",t.region),w.Jb(1),w.pc("ngIf",!t.region))},directives:[o.n,o.m,K.c],pipes:[F.c,K.b,o.f],styles:[".region-details[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:600px}.region-details[_ngcontent-%COMP%]   .info-details[_ngcontent-%COMP%]   .img-custom[_ngcontent-%COMP%]{width:100px}.user-img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;position:relative;border:2px solid #517197;max-width:100%}.user-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%}.comment-body[_ngcontent-%COMP%]{border:1px solid #517197}.comment-body[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:rgba(54,72,94,.92)}.comment-body[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:#9e9e9e}.comment-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid transparent;background:#517197;color:#fff;margin:15px 10px;outline:none;transition:all .5s ease-in-out;-webkit-transition:all .5s ease-in-out}.comment-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:none;color:#517197;border:1px solid #517197}.comment-block[_ngcontent-%COMP%]{margin-bottom:10px}"]}),e})()},{path:"edit/:id",component:le}];let Pe=(()=>{class e{}return e.\u0275mod=w.Tb({type:e}),e.\u0275inj=w.Sb({factory:function(t){return new(t||e)},imports:[[i.g.forChild(Oe)],i.g]}),e})();var Ze=n("9jGm"),we=n("LRne"),Re=n("5+tZ"),xe=n("lJxs"),ye=n("JIr8"),Ie=n("XqQ8");let Me=(()=>{class e{constructor(e,t,n,i,o,c){this.actions$=e,this.store=t,this.toaster=n,this.router=i,this.activatedRoute=o,this.regionService=c,this.loadRegions$=Object(Ze.c)(()=>this.actions$.pipe(Object(Ze.d)(s),Object(Re.a)(()=>this.regionService.getAllRegions().pipe(Object(xe.a)(e=>l(e)),Object(ye.a)(e=>(console.log("error effect: ",e),e.error.error?this.toaster.error(e.error.error):e.error.msg&&this.toaster.error(e.error.msg),Object(we.a)(g(e)))))))),this.loadRegion$=Object(Ze.c)(()=>this.actions$.pipe(Object(Ze.d)(d),Object(Re.a)(e=>this.regionService.getRegion(e.id).pipe(Object(xe.a)(e=>u({region:e.Data})),Object(ye.a)(e=>(console.log("error effect",e),Object(we.a)(b({error:e})))))))),this.addRegion$=Object(Ze.c)(()=>this.actions$.pipe(Object(Ze.d)(f),Object(Ie.a)(e=>this.regionService.createRegion(e.region).pipe(Object(xe.a)(e=>(this.toaster.success(null==e?void 0:e.msg),v())),Object(ye.a)(e=>(console.log("error create effect",e),Object(we.a)(C({error:e})))))))),this.updateRegion$=Object(Ze.c)(()=>this.actions$.pipe(Object(Ze.d)(O),Object(I.a)(e=>this.regionService.updateRegion(e.region).pipe(Object(xe.a)(t=>{this.toaster.success(t.msg);const n={id:e.region.id,changes:Object.assign({},e.region)};return P({region:n})}),Object(ye.a)(e=>Object(we.a)(Z({error:e}))))))),this.redirectAddUpdateRegion$=Object(Ze.c)(()=>this.actions$.pipe(Object(Ze.d)(v,P),Object(xe.a)(()=>{this.router.navigate(["regions"])})),{dispatch:!1}),this.deleteRegion$=Object(Ze.c)(()=>this.actions$.pipe(Object(Ze.d)(p),Object(Ie.a)(e=>this.regionService.deleteRegion(e.id).pipe(Object(xe.a)(e=>(console.log(e),this.toaster.success("Region Successfully Deleted"),m())),Object(ye.a)(e=>(console.log("effect delete error",e),Object(we.a)(h({error:e}))))))))}}return e.\u0275fac=function(t){return new(t||e)(w.ec(Ze.a),w.ec(r.h),w.ec(R.b),w.ec(i.d),w.ec(i.a),w.ec(_))},e.\u0275prov=w.Rb({token:e,factory:e.\u0275fac}),e})();var Je=n("vTDv");let Le=(()=>{class e{}return e.\u0275mod=w.Tb({type:e}),e.\u0275inj=w.Sb({factory:function(t){return new(t||e)},imports:[[Je.a,Pe,r.j.forFeature("regions",E),Ze.b.forFeature([Me])]]}),e})()}}]);